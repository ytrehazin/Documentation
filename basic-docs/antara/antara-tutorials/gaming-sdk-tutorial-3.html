<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tutorial: How to do a Tic-Tac-Toe in less than 15 minutes with the gaming SDK ? | Komodo Documentation</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/KMD_Mark_Black.png">
    <meta name="description" content="Please become familiar with the Getting Started tutorial before beginning this tutorial.">
    <meta name="image" content="https://docs.komodoplatform.com/tic-tac-toe-tutorial/black_window.png">
    <meta name="twitter:title" content="Tutorial: How to do a Tic-Tac-Toe in less than 15 minutes with the gaming SDK ?">
    <meta name="twitter:description" content="Please become familiar with the Getting Started tutorial before beginning this tutorial.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://docs.komodoplatform.com/tic-tac-toe-tutorial/black_window.png">
    <meta name="twitter:url" content="https://docs.komodoplatform.com/basic-docs/antara/antara-tutorials/gaming-sdk-tutorial-3.html">
    <meta name="twitter:site" content="@komodoplatform">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Tutorial: How to do a Tic-Tac-Toe in less than 15 minutes with the gaming SDK ?">
    <meta property="og:description" content="Please become familiar with the Getting Started tutorial before beginning this tutorial.">
    <meta property="og:image" content="https://docs.komodoplatform.com/tic-tac-toe-tutorial/black_window.png">
    <meta property="og:url" content="https://docs.komodoplatform.com/basic-docs/antara/antara-tutorials/gaming-sdk-tutorial-3.html">
    <meta property="og:site_name" content="Komodo Documentation">
    <meta itemprop="name" content="Tutorial: How to do a Tic-Tac-Toe in less than 15 minutes with the gaming SDK ?">
    <meta itemprop="description" content="Please become familiar with the Getting Started tutorial before beginning this tutorial.">
    <meta itemprop="image" content="https://docs.komodoplatform.com/tic-tac-toe-tutorial/black_window.png">
    <link rel="preload" href="/assets/css/0.styles.86b9611c.css" as="style"><link rel="preload" href="/assets/js/app.c7b26f99.js" as="script"><link rel="preload" href="/assets/js/5.225be964.js" as="script"><link rel="preload" href="/assets/js/3.b0f5714b.js" as="script"><link rel="preload" href="/assets/js/57.243ace2f.js" as="script"><link rel="prefetch" href="/assets/js/10.64307c63.js"><link rel="prefetch" href="/assets/js/100.a3b605f8.js"><link rel="prefetch" href="/assets/js/101.55510fa8.js"><link rel="prefetch" href="/assets/js/102.a892e89a.js"><link rel="prefetch" href="/assets/js/103.738ea570.js"><link rel="prefetch" href="/assets/js/104.600aa2a2.js"><link rel="prefetch" href="/assets/js/105.adac24ce.js"><link rel="prefetch" href="/assets/js/106.4c86bcbc.js"><link rel="prefetch" href="/assets/js/107.4286543b.js"><link rel="prefetch" href="/assets/js/108.e90c2f73.js"><link rel="prefetch" href="/assets/js/109.54bc2251.js"><link rel="prefetch" href="/assets/js/11.b104ef69.js"><link rel="prefetch" href="/assets/js/110.0f1d3eab.js"><link rel="prefetch" href="/assets/js/111.56812ee6.js"><link rel="prefetch" href="/assets/js/112.6d0acc0b.js"><link rel="prefetch" href="/assets/js/113.5b136731.js"><link rel="prefetch" href="/assets/js/114.17278dfa.js"><link rel="prefetch" href="/assets/js/115.b06e2d1a.js"><link rel="prefetch" href="/assets/js/116.2606d765.js"><link rel="prefetch" href="/assets/js/117.ebffa7ac.js"><link rel="prefetch" href="/assets/js/118.17918eb8.js"><link rel="prefetch" href="/assets/js/119.ef717c07.js"><link rel="prefetch" href="/assets/js/12.50cf463b.js"><link rel="prefetch" href="/assets/js/120.5e2c9f63.js"><link rel="prefetch" href="/assets/js/121.c6b04387.js"><link rel="prefetch" href="/assets/js/122.264cfdb8.js"><link rel="prefetch" href="/assets/js/123.d49c28b3.js"><link rel="prefetch" href="/assets/js/124.25e88b0d.js"><link rel="prefetch" href="/assets/js/125.e09d43db.js"><link rel="prefetch" href="/assets/js/126.99175479.js"><link rel="prefetch" href="/assets/js/127.7dee657f.js"><link rel="prefetch" href="/assets/js/128.07a78f4f.js"><link rel="prefetch" href="/assets/js/129.6eab18df.js"><link rel="prefetch" href="/assets/js/13.0ec30d33.js"><link rel="prefetch" href="/assets/js/130.8866b503.js"><link rel="prefetch" href="/assets/js/131.b51f9f02.js"><link rel="prefetch" href="/assets/js/132.b4c64d09.js"><link rel="prefetch" href="/assets/js/133.37ca6120.js"><link rel="prefetch" href="/assets/js/134.0f19a6d8.js"><link rel="prefetch" href="/assets/js/135.7a723908.js"><link rel="prefetch" href="/assets/js/136.53d4e6aa.js"><link rel="prefetch" href="/assets/js/137.087aea10.js"><link rel="prefetch" href="/assets/js/138.e4606c9e.js"><link rel="prefetch" href="/assets/js/139.686c5856.js"><link rel="prefetch" href="/assets/js/14.c2dc0272.js"><link rel="prefetch" href="/assets/js/140.ef045526.js"><link rel="prefetch" href="/assets/js/141.e2b017e8.js"><link rel="prefetch" href="/assets/js/142.9ff448d8.js"><link rel="prefetch" href="/assets/js/143.c99f5e09.js"><link rel="prefetch" href="/assets/js/144.905bd286.js"><link rel="prefetch" href="/assets/js/145.bee469d0.js"><link rel="prefetch" href="/assets/js/146.75743242.js"><link rel="prefetch" href="/assets/js/147.a1bfe842.js"><link rel="prefetch" href="/assets/js/148.e1df5f66.js"><link rel="prefetch" href="/assets/js/149.8368f73a.js"><link rel="prefetch" href="/assets/js/15.09d6a6b6.js"><link rel="prefetch" href="/assets/js/150.43509b7e.js"><link rel="prefetch" href="/assets/js/151.b4a05844.js"><link rel="prefetch" href="/assets/js/152.92ab5d73.js"><link rel="prefetch" href="/assets/js/153.9f8bd2a1.js"><link rel="prefetch" href="/assets/js/154.b653ad3b.js"><link rel="prefetch" href="/assets/js/155.367bc1e5.js"><link rel="prefetch" href="/assets/js/156.98c2cb1c.js"><link rel="prefetch" href="/assets/js/157.39b8d0a3.js"><link rel="prefetch" href="/assets/js/158.fb21c4fc.js"><link rel="prefetch" href="/assets/js/159.7b468183.js"><link rel="prefetch" href="/assets/js/16.c8589f53.js"><link rel="prefetch" href="/assets/js/160.0c00f67b.js"><link rel="prefetch" href="/assets/js/161.6582694d.js"><link rel="prefetch" href="/assets/js/162.8543fff8.js"><link rel="prefetch" href="/assets/js/163.73cb2732.js"><link rel="prefetch" href="/assets/js/164.eb8d9b84.js"><link rel="prefetch" href="/assets/js/165.4ca05817.js"><link rel="prefetch" href="/assets/js/166.86e97421.js"><link rel="prefetch" href="/assets/js/167.b86801a0.js"><link rel="prefetch" href="/assets/js/168.96ad3b8f.js"><link rel="prefetch" href="/assets/js/169.ef517062.js"><link rel="prefetch" href="/assets/js/17.dc1ed030.js"><link rel="prefetch" href="/assets/js/170.503a6e3d.js"><link rel="prefetch" href="/assets/js/171.56814f65.js"><link rel="prefetch" href="/assets/js/172.289b6cdb.js"><link rel="prefetch" href="/assets/js/173.e2f48a70.js"><link rel="prefetch" href="/assets/js/174.4f3bf534.js"><link rel="prefetch" href="/assets/js/175.6b488722.js"><link rel="prefetch" href="/assets/js/176.e5bc0012.js"><link rel="prefetch" href="/assets/js/177.e1bd0955.js"><link rel="prefetch" href="/assets/js/178.d9ef2201.js"><link rel="prefetch" href="/assets/js/179.8de45917.js"><link rel="prefetch" href="/assets/js/18.d5099748.js"><link rel="prefetch" href="/assets/js/180.5d3f9dc2.js"><link rel="prefetch" href="/assets/js/181.dbb3b15b.js"><link rel="prefetch" href="/assets/js/182.d25a4596.js"><link rel="prefetch" href="/assets/js/183.61e94be8.js"><link rel="prefetch" href="/assets/js/184.303902d4.js"><link rel="prefetch" href="/assets/js/185.c44e31d1.js"><link rel="prefetch" href="/assets/js/186.4564e66a.js"><link rel="prefetch" href="/assets/js/187.c4d803b5.js"><link rel="prefetch" href="/assets/js/188.95291da2.js"><link rel="prefetch" href="/assets/js/189.600b9a5a.js"><link rel="prefetch" href="/assets/js/19.c26f2abf.js"><link rel="prefetch" href="/assets/js/190.7708926d.js"><link rel="prefetch" href="/assets/js/191.79cf44b0.js"><link rel="prefetch" href="/assets/js/192.ba9085fa.js"><link rel="prefetch" href="/assets/js/193.3b379073.js"><link rel="prefetch" href="/assets/js/194.f0bb2ab4.js"><link rel="prefetch" href="/assets/js/195.dba8c965.js"><link rel="prefetch" href="/assets/js/196.8f574e53.js"><link rel="prefetch" href="/assets/js/197.da5ec16b.js"><link rel="prefetch" href="/assets/js/198.edde80f6.js"><link rel="prefetch" href="/assets/js/199.f74d4e12.js"><link rel="prefetch" href="/assets/js/20.11178eee.js"><link rel="prefetch" href="/assets/js/200.704db556.js"><link rel="prefetch" href="/assets/js/201.a1e5557d.js"><link rel="prefetch" href="/assets/js/202.5a68d17a.js"><link rel="prefetch" href="/assets/js/203.5730e957.js"><link rel="prefetch" href="/assets/js/204.80238faf.js"><link rel="prefetch" href="/assets/js/205.b46eb648.js"><link rel="prefetch" href="/assets/js/206.11e404b5.js"><link rel="prefetch" href="/assets/js/207.9b44e71b.js"><link rel="prefetch" href="/assets/js/208.b457632a.js"><link rel="prefetch" href="/assets/js/209.e1f44537.js"><link rel="prefetch" href="/assets/js/21.5734704d.js"><link rel="prefetch" href="/assets/js/210.2493c7a2.js"><link rel="prefetch" href="/assets/js/211.a7c3d6eb.js"><link rel="prefetch" href="/assets/js/212.f7c2ba28.js"><link rel="prefetch" href="/assets/js/213.b17e5494.js"><link rel="prefetch" href="/assets/js/214.a165c791.js"><link rel="prefetch" href="/assets/js/215.ed0d7e19.js"><link rel="prefetch" href="/assets/js/216.afc835ee.js"><link rel="prefetch" href="/assets/js/217.a4d042e0.js"><link rel="prefetch" href="/assets/js/218.5911d698.js"><link rel="prefetch" href="/assets/js/219.65b3b7ee.js"><link rel="prefetch" href="/assets/js/22.67591392.js"><link rel="prefetch" href="/assets/js/220.9bfa7f35.js"><link rel="prefetch" href="/assets/js/221.a3866730.js"><link rel="prefetch" href="/assets/js/222.c4dc15bc.js"><link rel="prefetch" href="/assets/js/223.9ea6d6e5.js"><link rel="prefetch" href="/assets/js/224.66e029ca.js"><link rel="prefetch" href="/assets/js/225.374e19b7.js"><link rel="prefetch" href="/assets/js/226.1384d904.js"><link rel="prefetch" href="/assets/js/227.f0ab2b6f.js"><link rel="prefetch" href="/assets/js/228.7a89fa76.js"><link rel="prefetch" href="/assets/js/229.eee66589.js"><link rel="prefetch" href="/assets/js/23.06111028.js"><link rel="prefetch" href="/assets/js/230.52531575.js"><link rel="prefetch" href="/assets/js/231.e74ccf82.js"><link rel="prefetch" href="/assets/js/232.6d526890.js"><link rel="prefetch" href="/assets/js/233.b48efa6c.js"><link rel="prefetch" href="/assets/js/234.9d959218.js"><link rel="prefetch" href="/assets/js/235.c2901f27.js"><link rel="prefetch" href="/assets/js/236.f44d0b64.js"><link rel="prefetch" href="/assets/js/237.cdaddb12.js"><link rel="prefetch" href="/assets/js/238.15ee7727.js"><link rel="prefetch" href="/assets/js/239.0b17c47d.js"><link rel="prefetch" href="/assets/js/24.94c7ac25.js"><link rel="prefetch" href="/assets/js/240.8e3172d6.js"><link rel="prefetch" href="/assets/js/241.8b6e360d.js"><link rel="prefetch" href="/assets/js/242.5a8d7efa.js"><link rel="prefetch" href="/assets/js/243.238afcce.js"><link rel="prefetch" href="/assets/js/244.7a06faf0.js"><link rel="prefetch" href="/assets/js/245.b61daac5.js"><link rel="prefetch" href="/assets/js/246.778aa519.js"><link rel="prefetch" href="/assets/js/247.0629625c.js"><link rel="prefetch" href="/assets/js/248.0ba39ea8.js"><link rel="prefetch" href="/assets/js/249.eda4b65b.js"><link rel="prefetch" href="/assets/js/25.e2cfe953.js"><link rel="prefetch" href="/assets/js/250.a972f825.js"><link rel="prefetch" href="/assets/js/251.110e774c.js"><link rel="prefetch" href="/assets/js/252.84df854b.js"><link rel="prefetch" href="/assets/js/253.3102a360.js"><link rel="prefetch" href="/assets/js/254.63c86610.js"><link rel="prefetch" href="/assets/js/255.471851d0.js"><link rel="prefetch" href="/assets/js/256.63108e2b.js"><link rel="prefetch" href="/assets/js/26.2cc373cb.js"><link rel="prefetch" href="/assets/js/27.554d0402.js"><link rel="prefetch" href="/assets/js/28.07e35838.js"><link rel="prefetch" href="/assets/js/29.8fbb71c8.js"><link rel="prefetch" href="/assets/js/30.83a20948.js"><link rel="prefetch" href="/assets/js/31.cd4c7cf4.js"><link rel="prefetch" href="/assets/js/32.78ff55a4.js"><link rel="prefetch" href="/assets/js/33.553389b4.js"><link rel="prefetch" href="/assets/js/34.676881b1.js"><link rel="prefetch" href="/assets/js/35.a7312fd9.js"><link rel="prefetch" href="/assets/js/36.7f7bb0f1.js"><link rel="prefetch" href="/assets/js/37.1442ab82.js"><link rel="prefetch" href="/assets/js/38.863a8be9.js"><link rel="prefetch" href="/assets/js/39.8fad24dc.js"><link rel="prefetch" href="/assets/js/4.e56ac55b.js"><link rel="prefetch" href="/assets/js/40.bbd2eaa6.js"><link rel="prefetch" href="/assets/js/41.683ac807.js"><link rel="prefetch" href="/assets/js/42.da3b6806.js"><link rel="prefetch" href="/assets/js/43.7996b9be.js"><link rel="prefetch" href="/assets/js/44.75cc0fe2.js"><link rel="prefetch" href="/assets/js/45.ea9f6a96.js"><link rel="prefetch" href="/assets/js/46.b5dbf0ee.js"><link rel="prefetch" href="/assets/js/47.cf0022fb.js"><link rel="prefetch" href="/assets/js/48.cf31befc.js"><link rel="prefetch" href="/assets/js/49.ae1a0e00.js"><link rel="prefetch" href="/assets/js/50.173e6541.js"><link rel="prefetch" href="/assets/js/51.4e5810ca.js"><link rel="prefetch" href="/assets/js/52.785a9d09.js"><link rel="prefetch" href="/assets/js/53.e38ff1cb.js"><link rel="prefetch" href="/assets/js/54.541697ce.js"><link rel="prefetch" href="/assets/js/55.4e0a9e90.js"><link rel="prefetch" href="/assets/js/56.71dae9b1.js"><link rel="prefetch" href="/assets/js/58.f819672b.js"><link rel="prefetch" href="/assets/js/59.f286f979.js"><link rel="prefetch" href="/assets/js/6.1945794b.js"><link rel="prefetch" href="/assets/js/60.6d081688.js"><link rel="prefetch" href="/assets/js/61.34442ab7.js"><link rel="prefetch" href="/assets/js/62.1f6424e2.js"><link rel="prefetch" href="/assets/js/63.ed2247d7.js"><link rel="prefetch" href="/assets/js/64.ad326ae9.js"><link rel="prefetch" href="/assets/js/65.9f1db332.js"><link rel="prefetch" href="/assets/js/66.26d278e3.js"><link rel="prefetch" href="/assets/js/67.aa403b56.js"><link rel="prefetch" href="/assets/js/68.0cb9608f.js"><link rel="prefetch" href="/assets/js/69.cb1501f4.js"><link rel="prefetch" href="/assets/js/7.6423c8a4.js"><link rel="prefetch" href="/assets/js/70.b55b3434.js"><link rel="prefetch" href="/assets/js/71.454c83c4.js"><link rel="prefetch" href="/assets/js/72.8215a15d.js"><link rel="prefetch" href="/assets/js/73.231f82c0.js"><link rel="prefetch" href="/assets/js/74.da822b6d.js"><link rel="prefetch" href="/assets/js/75.b82074ee.js"><link rel="prefetch" href="/assets/js/76.a52d9a96.js"><link rel="prefetch" href="/assets/js/77.bf0837b0.js"><link rel="prefetch" href="/assets/js/78.f33b3972.js"><link rel="prefetch" href="/assets/js/79.a5baf781.js"><link rel="prefetch" href="/assets/js/8.49442b15.js"><link rel="prefetch" href="/assets/js/80.5a1d6882.js"><link rel="prefetch" href="/assets/js/81.689c8291.js"><link rel="prefetch" href="/assets/js/82.bf7442f0.js"><link rel="prefetch" href="/assets/js/83.67102be1.js"><link rel="prefetch" href="/assets/js/84.2bc624eb.js"><link rel="prefetch" href="/assets/js/85.42b46bf3.js"><link rel="prefetch" href="/assets/js/86.a303b766.js"><link rel="prefetch" href="/assets/js/87.3369326d.js"><link rel="prefetch" href="/assets/js/88.bc270ced.js"><link rel="prefetch" href="/assets/js/89.346c9a43.js"><link rel="prefetch" href="/assets/js/9.6ad61f7f.js"><link rel="prefetch" href="/assets/js/90.7efe6617.js"><link rel="prefetch" href="/assets/js/91.d097b7d7.js"><link rel="prefetch" href="/assets/js/92.e416615a.js"><link rel="prefetch" href="/assets/js/93.0a3af1c5.js"><link rel="prefetch" href="/assets/js/94.45a0c852.js"><link rel="prefetch" href="/assets/js/95.ae9d1c63.js"><link rel="prefetch" href="/assets/js/96.ea9206a3.js"><link rel="prefetch" href="/assets/js/97.d16a909b.js"><link rel="prefetch" href="/assets/js/98.1ec0dd9e.js"><link rel="prefetch" href="/assets/js/99.99f7f082.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.6cb0424f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.86b9611c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/KMD_Horiz_White.svg" alt="Komodo Documentation" class="logo"></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/basic-docs/start-here/outline-for-new-developers.html" class="nav-link">
  Start Here
</a></div><div class="nav-item"><a href="/basic-docs/smart-chains/introduction-to-smart-chain-documentation.html" class="nav-link">
  Smart Chain Essentials
</a></div><div class="nav-item"><a href="/basic-docs/antara/introduction-to-antara.html" class="nav-link">
  Antara Framework
</a></div><div class="nav-item"><a href="/basic-docs/atomicdex/introduction-to-atomicdex.html" class="nav-link">
  AtomicDEX
</a></div><div class="nav-item"><a href="/komodo/installation.html" class="nav-link">
  Komodo
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guides" class="mobile-dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cc-jl/introduction.html" class="nav-link">
  CC Book
</a></li><li class="dropdown-item"><!----> <a href="/notary/setup-Komodo-Notary-Node.html" class="nav-link">
  Notary Nodes
</a></li><li class="dropdown-item"><!----> <a href="/mmV1/introduction.html" class="nav-link">
  Marketmaker V1
</a></li><li class="dropdown-item"><!----> <a href="/basic-docs/smart-chains/smart-chain-setup/nspv.html" class="nav-link">
  nSPV
</a></li><li class="dropdown-item"><!----> <a href="/gui/agama/introduction.html" class="nav-link">
  Agama
</a></li><li class="dropdown-item"><!----> <a href="/qa/debug-Komodo.html" class="nav-link">
  QA and Testing
</a></li><li class="dropdown-item"><!----> <a href="/whitepaper/introduction.html" class="nav-link">
  Whitepaper
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Resources" class="dropdown-title"><span class="title">Resources</span> <span class="arrow down"></span></button> <button type="button" aria-label="Resources" class="mobile-dropdown-title"><span class="title">Resources</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resources/list-all-KomodoPlatform-repos-links.html" class="nav-link">
  Komodo Platform
</a></li><li class="dropdown-item"><!----> <a href="/resources/third-party-repos-resources.html" class="nav-link">
  Third Party
</a></li></ul></div></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/komodoplatform/Documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/basic-docs/start-here/outline-for-new-developers.html" class="nav-link">
  Start Here
</a></div><div class="nav-item"><a href="/basic-docs/smart-chains/introduction-to-smart-chain-documentation.html" class="nav-link">
  Smart Chain Essentials
</a></div><div class="nav-item"><a href="/basic-docs/antara/introduction-to-antara.html" class="nav-link">
  Antara Framework
</a></div><div class="nav-item"><a href="/basic-docs/atomicdex/introduction-to-atomicdex.html" class="nav-link">
  AtomicDEX
</a></div><div class="nav-item"><a href="/komodo/installation.html" class="nav-link">
  Komodo
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guides" class="mobile-dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cc-jl/introduction.html" class="nav-link">
  CC Book
</a></li><li class="dropdown-item"><!----> <a href="/notary/setup-Komodo-Notary-Node.html" class="nav-link">
  Notary Nodes
</a></li><li class="dropdown-item"><!----> <a href="/mmV1/introduction.html" class="nav-link">
  Marketmaker V1
</a></li><li class="dropdown-item"><!----> <a href="/basic-docs/smart-chains/smart-chain-setup/nspv.html" class="nav-link">
  nSPV
</a></li><li class="dropdown-item"><!----> <a href="/gui/agama/introduction.html" class="nav-link">
  Agama
</a></li><li class="dropdown-item"><!----> <a href="/qa/debug-Komodo.html" class="nav-link">
  QA and Testing
</a></li><li class="dropdown-item"><!----> <a href="/whitepaper/introduction.html" class="nav-link">
  Whitepaper
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Resources" class="dropdown-title"><span class="title">Resources</span> <span class="arrow down"></span></button> <button type="button" aria-label="Resources" class="mobile-dropdown-title"><span class="title">Resources</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resources/list-all-KomodoPlatform-repos-links.html" class="nav-link">
  Komodo Platform
</a></li><li class="dropdown-item"><!----> <a href="/resources/third-party-repos-resources.html" class="nav-link">
  Third Party
</a></li></ul></div></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/komodoplatform/Documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/basic-docs/antara/introduction-to-antara.html" class="sidebar-link">Introduction to Antara Documentation</a></li><li><a href="/basic-docs/antara/antara-setup/antara-customizations.html" class="sidebar-link">Antara Customizations</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Antara Tutorials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Antara Modules</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="tutorial-how-to-do-a-tic-tac-toe-in-less-than-15-minutes-with-the-gaming-sdk"><a href="#tutorial-how-to-do-a-tic-tac-toe-in-less-than-15-minutes-with-the-gaming-sdk" class="header-anchor">#</a> Tutorial: How to do a Tic-Tac-Toe in less than 15 minutes with the gaming SDK ?</h1> <p>Please become familiar with the <a href="/basic-docs/antara/antara-tutorials/tic-tac-toe-tutorial-0.html">Getting Started</a> tutorial before beginning this tutorial.</p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>This tutorial guides the reader in creating a simple game of Tic-Tac-Toe in relation to Komodo technology.</p> <h2 id="set-up-the-executable-and-window"><a href="#set-up-the-executable-and-window" class="header-anchor">#</a> Set Up the Executable and Window</h2> <h4 id="create-a-project-directory"><a href="#create-a-project-directory" class="header-anchor">#</a> Create a Project Directory</h4> <p>Create a folder called <code>tic-tac-toe</code> for the project.</p> <h4 id="create-cmakelists-txt"><a href="#create-cmakelists-txt" class="header-anchor">#</a> Create CMakeLists.txt</h4> <p>Create a text file <code>CMakeLists.txt</code> to create and compile the executable.</p> <p>The <code>CMakeLists.txt</code> file contains the following items:</p> <ul><li>Name of the project</li> <li>Creation of the executable</li> <li>Link with the SDK</li> <li>C++ standard that will be used</li> <li>Any desired extra modules
<ul><li>For this tutorial, the extra modules is the <code>antara::sfml</code> module provided by the Antara Gaming SDK</li></ul></li></ul> <p>Below is an example <code>CMakeLists.txt</code> file.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token punctuation">{</span>CMAKE_SOURCE_DIR<span class="token punctuation">}</span> STREQUAL $<span class="token punctuation">{</span>CMAKE_BINARY_DIR<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">message</span><span class="token punctuation">(</span>FATAL_ERROR <span class="token string">&quot;Prevented in-tree build. Please create a build directory outside of the source code and call cmake from there&quot;</span><span class="token punctuation">)</span>
<span class="token function">endif</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
##<span class="token operator">!</span> Minimum version of the CMake<span class="token punctuation">.</span>
<span class="token function">cmake_minimum_required</span><span class="token punctuation">(</span>VERSION <span class="token number">3.14</span><span class="token punctuation">)</span>
##<span class="token operator">!</span> C<span class="token operator">++</span> Standard needed by the SDK is <span class="token number">17</span>
<span class="token function">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">17</span><span class="token punctuation">)</span>
##<span class="token operator">!</span> Our Project title<span class="token punctuation">,</span> here tic<span class="token operator">-</span>tac<span class="token operator">-</span>toe<span class="token punctuation">.</span>
<span class="token function">project</span><span class="token punctuation">(</span>tic<span class="token operator">-</span>tac<span class="token operator">-</span>toe DESCRIPTION <span class="token string">&quot;An awesome tic-tac-toe&quot;</span> LANGUAGES CXX<span class="token punctuation">)</span>
##<span class="token operator">!</span> The SDK need<span class="token number">'</span>s clang as main compiler<span class="token punctuation">.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>NOT <span class="token string">&quot;${CMAKE_CXX_COMPILER_ID}&quot;</span> STREQUAL <span class="token string">&quot;Clang&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>NOT <span class="token string">&quot;${CMAKE_CXX_COMPILER_ID}&quot;</span> STREQUAL <span class="token string">&quot;AppleClang&quot;</span><span class="token punctuation">)</span>
        <span class="token function">message</span><span class="token punctuation">(</span>FATAL_ERROR <span class="token string">&quot;Only Clang is supported (minimum LLVM 8.0)&quot;</span><span class="token punctuation">)</span>
    <span class="token function">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">endif</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
##<span class="token operator">!</span> Test whether the setup is on Linux
<span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token punctuation">{</span>CMAKE_SYSTEM_NAME<span class="token punctuation">}</span> STREQUAL <span class="token string">&quot;Linux&quot;</span><span class="token punctuation">)</span>
    <span class="token function">set</span><span class="token punctuation">(</span>LINUX TRUE<span class="token punctuation">)</span>
<span class="token function">endif</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
##<span class="token operator">!</span> Include the module from CMake <span class="token keyword">for</span> fetching dependencies
<span class="token function">include</span><span class="token punctuation">(</span>FetchContent<span class="token punctuation">)</span>
##<span class="token operator">!</span> Declare information about the dependance to fetch
<span class="token function">FetchContent_Declare</span><span class="token punctuation">(</span>
        antara<span class="token operator">-</span>gaming<span class="token operator">-</span>sdk
        URL https<span class="token operator">:</span><span class="token comment">//github.com/KomodoPlatform/antara-gaming-sdk/archive/master.zip</span>
<span class="token punctuation">)</span>
##<span class="token operator">!</span> Set extras modules from the SDK
<span class="token function">set</span><span class="token punctuation">(</span>USE_SFML_ANTARA_WRAPPER ON<span class="token punctuation">)</span>
##<span class="token operator">!</span> Fetch the dependence
<span class="token function">FetchContent_MakeAvailable</span><span class="token punctuation">(</span>antara<span class="token operator">-</span>gaming<span class="token operator">-</span>sdk<span class="token punctuation">)</span>
##<span class="token operator">!</span> If <span class="token keyword">using</span> OSX<span class="token punctuation">,</span> calling <span class="token keyword">this</span> macro provided by the sdk will initalize the <span class="token function">environment</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token punctuation">)</span>
<span class="token function">init_apple_env</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
##<span class="token operator">!</span> Create the executable with the project name
<span class="token function">add_executable</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span> tic<span class="token operator">-</span>tac<span class="token operator">-</span>toe<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
##<span class="token operator">!</span> Set output directory
<span class="token function">set_target_properties</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span>
        PROPERTIES
        RUNTIME_OUTPUT_DIRECTORY <span class="token string">&quot;${CMAKE_BINARY_DIR}/bin/&quot;</span>
        <span class="token punctuation">)</span>
##<span class="token operator">!</span> Link the SDK modules used in the executable
<span class="token function">target_link_libraries</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span> PUBLIC antara<span class="token operator">::</span>world antara<span class="token operator">::</span>sfml<span class="token punctuation">)</span>
##<span class="token operator">!</span> Move DLL
<span class="token keyword">if</span> <span class="token punctuation">(</span>WIN32<span class="token punctuation">)</span>
    <span class="token function">ADD_CUSTOM_COMMAND</span><span class="token punctuation">(</span>TARGET $<span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span> POST_BUILD
            COMMAND $<span class="token punctuation">{</span>CMAKE_COMMAND<span class="token punctuation">}</span> <span class="token operator">-</span>E copy_directory <span class="token string">&quot;${SFML_BINARY_DIR}/lib&quot;</span> <span class="token string">&quot;${CMAKE_BINARY_DIR}/bin/&quot;</span>
            COMMENT <span class="token string">&quot;copying dlls …&quot;</span>
            $<span class="token operator">&lt;</span>TARGET_FILE_DIR<span class="token operator">:</span>$<span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
    <span class="token function">ADD_CUSTOM_COMMAND</span><span class="token punctuation">(</span>TARGET $<span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span> POST_BUILD
            COMMAND $<span class="token punctuation">{</span>CMAKE_COMMAND<span class="token punctuation">}</span> <span class="token operator">-</span>E copy <span class="token string">&quot;${SFML_SOURCE_DIR}/extlibs/bin/x64/openal32.dll&quot;</span> <span class="token string">&quot;${CMAKE_BINARY_DIR}/bin/openal32.dll&quot;</span>
            COMMENT <span class="token string">&quot;copying dlls …&quot;</span>
            $<span class="token operator">&lt;</span>TARGET_FILE_DIR<span class="token operator">:</span>$<span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
<span class="token function">endif</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="create-tic-tac-toe-cpp-input-file"><a href="#create-tic-tac-toe-cpp-input-file" class="header-anchor">#</a> Create tic-tac-toe.cpp Input File</h4> <p>Create the input file for the application and call it <code>tic-tac-toe.cpp</code>.</p> <p>Add an empty main function:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The project directory tree should now be as follows.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token punctuation">.</span><span class="token operator">/</span>tic<span class="token operator">-</span>tac<span class="token operator">-</span>toe
├── CMakeLists<span class="token punctuation">.</span>txt
└── tic<span class="token operator">-</span>tac<span class="token operator">-</span>toe<span class="token punctuation">.</span>cpp
</code></pre></div><h4 id="test-compilation"><a href="#test-compilation" class="header-anchor">#</a> Test Compilation</h4> <p>Before continuing, ensure that the required dependencies are installed and that the program compiles in its current state. To test compilation, use the build commands available in the <a href="/basic-docs/antara/antara-tutorials/tic-tac-toe-tutorial-0.html">Getting Started</a> tutorial.</p> <p>For assistance, please visit the Komodo <a href="https://discord.gg/VRtwmR2" target="_blank" rel="noopener noreferrer">Discord.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="create-world"><a href="#create-world" class="header-anchor">#</a> Create World</h4> <p>To create a world representing the world of the project game, use the following header file.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/world/world.app.hpp&gt;</span></span>
</code></pre></div><p>Add a basic structure, <code>tic_tac_toe_world</code>. This structure inherits from the <code>antara::gaming::world::app</code> class.</p> <p>Optionally, use the namespace <code>antara::gaming</code> to make naming easier.</p> <p>Declare the new world object in the body of the main function.</p> <p>Replace the return value, <code>return 0</code>, with the return value of the project game. This is the value that is returned by the <code>run</code> function of the <code>class world::app</code> object.</p> <p>The resulting logic should be similar to the following.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/world/world.hpp&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> antara<span class="token operator">::</span>gaming<span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_world</span> <span class="token operator">:</span> <span class="token base-clause">world<span class="token operator">::</span><span class="token class-name">app</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//! The game entry point</span>
    <span class="token function">tic_tac_toe_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    tic_tac_toe_world game<span class="token punctuation">;</span>
    <span class="token keyword">return</span> game<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>At this point, compiling and running the executable creates an infinite loop, and nothing happens.</p> <h4 id="initiate-the-graphics"><a href="#initiate-the-graphics" class="header-anchor">#</a> Initiate the Graphics</h4> <p>To initiate the in-game graphics, use the following two modules.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>antara<span class="token operator">::</span>gaming<span class="token operator">::</span>sfml<span class="token operator">::</span>graphic_system
antara<span class="token operator">::</span>gaming<span class="token operator">::</span>sfml<span class="token operator">::</span>input<span class="token operator">::</span>system
</code></pre></div><p>These modules have the following headers, respectively.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/graphic.system.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/input.system.hpp&gt;</span></span>
</code></pre></div><p>Load the graphic system in the body of the constructor of the <code>tic_tac_toe_world</code> class, and initialize the input system with the window from the loaded graphic system.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/world/world.app.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/graphic.system.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/input.system.hpp&gt;</span></span>
<span class="token comment">//! For convenience</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> antara<span class="token operator">::</span>gaming<span class="token punctuation">;</span>
<span class="token comment">//! The game world</span>
<span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_world</span> <span class="token operator">:</span> <span class="token base-clause">world<span class="token operator">::</span><span class="token class-name">app</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//! The game entry point</span>
    <span class="token function">tic_tac_toe_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Load the graphical system</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>graphic_system <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>graphic_system<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Load the input system with the window from the graphical system</span>
        system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>input_system<span class="token operator">&gt;</span><span class="token punctuation">(</span>graphic_system<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Declare the world</span>
    tic_tac_toe_world game<span class="token punctuation">;</span>
    <span class="token comment">//! Run the game</span>
    <span class="token keyword">return</span> game<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Compile and run the program. A black window should open.</p> <p>Close the window by pressing the close button on the window bar.</p> <div><img src="/tic-tac-toe-tutorial/black_window.png"></div> <h2 id="the-game-scene-the-grid-and-game-constants"><a href="#the-game-scene-the-grid-and-game-constants" class="header-anchor">#</a> The Game Scene, The Grid, and Game Constants</h2> <p>This portion of the tutorial creates the logic to draw the grid of Tic-Tac-Toe.</p> <p>The grid appears as follows.</p> <div><img src="/tic-tac-toe-tutorial/tictactoe.grid.jpg"></div> <h4 id="creating-the-game-scene"><a href="#creating-the-game-scene" class="header-anchor">#</a> Creating the Game Scene</h4> <p>This requires the creation of a game scene using the scene manager.</p> <p>Include the header file <code>#include &lt;antara/gaming/scenes/scene.manager.hpp&gt;</code> and load the scene's manager system into the system manager.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_world</span> <span class="token operator">:</span> <span class="token base-clause">world<span class="token operator">::</span><span class="token class-name">app</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//! The game entry point</span>
    <span class="token function">tic_tac_toe_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Load the graphical system</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>graphic_system <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>graphic_system<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Load the input system with the window from the graphical system</span>
        system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>input_system<span class="token operator">&gt;</span><span class="token punctuation">(</span>graphic_system<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Load the scenes manager</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>scene_manager <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>scenes<span class="token operator">::</span>manager<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Create the <code>game_scene</code> class that inherits from the <code>base_scene</code> class. The <code>game_scene</code> class will be the entry point of the project's game scene.</p> <p>The concrete class must override several functions, such as <code>update</code>, <code>scene_name</code>, and the destructor.</p> <p>There is no need to use the <code>update</code> function, because the game of Tic-Tac-Toe itself does not require an update for each frame. Leave the <code>update</code> function empty.</p> <p>For the <code>scene_name</code> function, return the name of the scene.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">game_scene</span> final <span class="token operator">:</span> <span class="token keyword">public</span> scenes<span class="token operator">::</span>base_scene
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">game_scene</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span> <span class="token function">base_scene</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">)</span>
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">//! This function will not be used, because Tic-Tac-Toe doesn't need an update every frame.</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">//! the scene name</span>
    std<span class="token operator">::</span>string <span class="token function">scene_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;game_scene&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">game_scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Load the game scene into the <code>scene_manager</code> using the <code>change_scene</code> member function.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_world</span> <span class="token operator">:</span> <span class="token base-clause">world<span class="token operator">::</span><span class="token class-name">app</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//! The game entry point</span>
    <span class="token function">tic_tac_toe_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Load the graphical system</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>graphic_system <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>graphic_system<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Load the input system with the window from the graphical system</span>
        system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>input_system<span class="token operator">&gt;</span><span class="token punctuation">(</span>graphic_system<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Load the scenes manager</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>scene_manager <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>scenes<span class="token operator">::</span>manager<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Change scene to game_scene</span>
        scene_manager<span class="token punctuation">.</span><span class="token function">change_scene</span><span class="token punctuation">(</span>std<span class="token operator">::</span>make_unique<span class="token operator">&lt;</span>game_scene<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Compiling now still results in the black window, as before, but this time the black window is the game scene.</p> <div><img src="/tic-tac-toe-tutorial/black_window.png"></div> <div class="custom-block tip"><p class="custom-block-title">Tip</p> <p>The scene system is a useful method for organizing multiple screens of the game: <strong>introduction scene</strong>, <strong>game scene</strong>, <strong>end-of-game scene</strong>, etc.</p></div> <h4 id="adding-constants"><a href="#adding-constants" class="header-anchor">#</a> Adding Constants</h4> <p>Several constants are essential for the game of Tic-Tac-Toe: <code>width</code> and <code>height</code> of a cell, the <code>number</code> of cells per <code>line</code> and the <code>thickness</code> of the grid.</p> <p>For the size of the cells, use the current size of the canvas divided by the number of cells per line. This obtains the size of a cell.</p> <p>Create a structure, <code>tic_tac_toe_constants</code>, that contains these different pieces of information. Save the structure in the entity registry, so that the data is accessible from anywhere in the program.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_constants</span>
<span class="token punctuation">{</span>
    <span class="token function">tic_tac_toe_constants</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t nb_cells_per_axis_<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t width_<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t height_<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span>
            <span class="token function">nb_cells_per_axis</span><span class="token punctuation">(</span>nb_cells_per_axis_<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">cell_width</span><span class="token punctuation">(</span>width_ <span class="token operator">/</span> nb_cells_per_axis<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">cell_height</span><span class="token punctuation">(</span>height_ <span class="token operator">/</span> nb_cells_per_axis<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t nb_cells_per_axis<span class="token punctuation">;</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t cell_width<span class="token punctuation">;</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t cell_height<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">float</span> grid_thickness<span class="token punctuation">{</span><span class="token number">20.0f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>In the constructor of the gaming scene create the following logic.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">game_scene</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span> <span class="token function">base_scene</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Retrieve canvas information</span>
    <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">.</span>to<span class="token operator">&lt;</span>math<span class="token operator">::</span>vec2u<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//! Set the constants that will be used in the program</span>
    entity_registry_<span class="token punctuation">.</span>set<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3ull</span><span class="token punctuation">,</span> canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To create the entity representing the grid, add in a private member of the <code>game_scene</code> class, the <code>grid_entity_</code> field, which is of type <code>entt::entity</code> and which has the initial value <code>entt::null</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">game_scene</span> final <span class="token operator">:</span> <span class="token keyword">public</span> scenes<span class="token operator">::</span>base_scene
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">game_scene</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span> <span class="token function">base_scene</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Retrieve canvas information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">.</span>to<span class="token operator">&lt;</span>math<span class="token operator">::</span>vec2u<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Set the constants that will be used in the program</span>
        entity_registry_<span class="token punctuation">.</span>set<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3ull</span><span class="token punctuation">,</span> canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//! This function won't be used, because Tic-Tac-Toe doesn't need to update every frame.</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">//! Return the scene name</span>
    std<span class="token operator">::</span>string <span class="token function">scene_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;game_scene&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">game_scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">//! The entity which represents the Tic-Tac-Toe grid</span>
    entt<span class="token operator">::</span>entity grid_entity_<span class="token punctuation">{</span>entt<span class="token operator">::</span>null<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>To initialize this entity, create an anonymous namespace with a function, <code>create_grid</code>, which returns an <code>entt::entity</code> and takes the parameter <code>entity registry</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Contains all functions which will be used for logic and factory</span>
<span class="token keyword">namespace</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Factory for creating a Tic-Tac-Toe grid</span>
    entt<span class="token operator">::</span>entity <span class="token function">create_grid</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> entt<span class="token operator">::</span>null<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Call the function from the game scene constructor and assign the return value to the field <code>grid_entity_</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">game_scene</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span> <span class="token function">base_scene</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Retrieve canvas information</span>
    <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">.</span>to<span class="token operator">&lt;</span>math<span class="token operator">::</span>vec2u<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//! Set the constants that will be used in the program</span>
    entity_registry_<span class="token punctuation">.</span>set<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3ull</span><span class="token punctuation">,</span> canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//! Create the grid of the Tic-Tac-Toe</span>
    grid_entity_ <span class="token operator">=</span> <span class="token function">create_grid</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="begin-the-create-grid-function-and-the-destruction-of-entities"><a href="#begin-the-create-grid-function-and-the-destruction-of-entities" class="header-anchor">#</a> Begin the create_grid Function and the Destruction of Entities</h4> <p>The following steps create the logic of the <code>create_grid</code> function and manage the destruction of the entities of the game scene when leaving the program.</p> <p>Retrieve the canvas size in order to define the size of the grid.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Retrieve canvas information</span>
<span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
</code></pre></div><p>Create a new entity named <code>grid</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Entity creation</span>
<span class="token keyword">auto</span> grid_entity <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To create a visual line in the scene, represent two dots on the screen (&quot;vertices&quot;) and join them together.</p> <p>Each vertex has an <code>X</code> position and a <code>Y</code> position.</p> <p>The connection of two vertices makes a line.</p> <p>However, the line thickness by default is only <code>1 px</code>. This is not visible when the scene's rendered image is small, due to scaling. Therefore, this scene requires a line that is <code>20 px</code> thick.</p> <div><img src="/tic-tac-toe-tutorial/grid_lines.png"></div> <p>A thick line is essentially a rectangle. Four vertices are required for a rectangle's four corners.</p> <p>A Tic-Tac-Toe grid requires four vertical lines: two in the middle and two at the screen borders. The grid also requires four horizontal lines, for the same effect.</p> <p>Therefore, the grid needs <code>8</code> lines, and each line is <code>4</code> vertices. Thus, <code>8 \* 4 = 32</code> vertices are required.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! The vertices</span>
std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex<span class="token operator">&gt;</span> lines<span class="token punctuation">{</span><span class="token number">8</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Additional information required for the grid includes the following.</p> <ul><li><p><code>nb_cells</code> : the number of cells in one axis — <code>3</code> in this case</p></li> <li><p><code>cell_width</code> and <code>cell_height</code> : width and height of a cell</p></li> <li><p><code>grid_thickness</code> : thickness of the line</p></li></ul> <p>Retrieve these from the defined constants.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Retrieve constants information</span>
<span class="token keyword">auto</span><span class="token punctuation">[</span>nb_cells<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> grid_thickness<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In calculations, use half of the thickness for the internal lines and the full thickness for the outer border of the grid</p> <p>For clarity and reuse, prepare another constant.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">const</span> <span class="token keyword">auto</span> half_thickness <span class="token operator">=</span> grid_thickness <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>
</code></pre></div><p>At each loop of the function that draws the grid, define one vertical and one horizontal line.</p> <p>There are <code>4</code> lines in each axis, and therefore the function needs to loop <code>4</code> times. In other words, the function needs to loop <code>nb_cells + 1</code> times.</p> <p>Start the count from <code>0</code> as this is used for the starting coordinate.</p> <p>There is also a variable <code>counter</code> which counts the vertex indexes. This varaible increases by <code>4 vertices \* 2 lines = 8 vertices</code> at each iteration.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! The loop to create the grid</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>size_t counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nb_cells<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> counter <span class="token operator">+=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre></div><p>The order of the vertices of a rectangle is logically arranged as follows: <code>Top Left</code>, <code>Top Right</code>, <code>Bottom Right</code>, <code>Bottom Left</code>.</p> <p>Therefore, the next neighbour is always the clockwise neighbour.</p> <div><img src="/tic-tac-toe-tutorial/vertex_order.png"></div> <h4 id="draw-the-vertical-line"><a href="#draw-the-vertical-line" class="header-anchor">#</a> Draw the Vertical Line</h4> <p>Draw the vertical line first and start with the <code>Top Left</code> vertex.</p> <p>A vertical line is from top to bottom and the <code>X</code> position is the same for the top and bottom. The <code>Y</code> changes, however.</p> <p>Calculate the <code>X</code> value first. <code>idx</code> is currently <code>0</code>. Multiply this value with <code>cell_width</code>.</p> <p>The <code>X</code> axis grows from left to right, while the <code>Y</code> axis grows from top to bottom.</p> <p>For example, say <code>cell_width</code> is <code>300</code>. In <code>4</code> iterations the <code>X</code> values are: <code>0, 300, 600, 900</code>.</p> <p>The left and right vertices of a thick vertical line need to be separate. Therefore, use <code>- half_thickness</code> to offset the <code>X</code> value a small amount to the left.</p> <p>The <code>Y</code> value for these vertices is <code>0</code> because they are located at the top of the screen.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>Top Right</code> vertex is essentially the same, with the exception of its using <code>+ half_thickness</code>; this offsets the <code>X</code> value in the opposite direction. <code>Y</code> is still <code>0</code> because it is still located at the top of the screen.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>For the <code>Bottom Right</code> vertex, <code>X</code> is the same as the <code>Top Right</code> vertex, but the <code>Y</code> value is now <code>canvas_height</code>, which is the bottom of the screen.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>For the last vertex, <code>Bottom Left</code>, the <code>Y</code> value is the same as <code>Bottom Right</code>, and the <code>X</code> value is using the <code>- half_thickness</code> adjustment, to align this <code>X</code> value with the left.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>This completes the vertical line.</p> <h4 id="draw-a-horizontal-line"><a href="#draw-a-horizontal-line" class="header-anchor">#</a> Draw a Horizontal Line</h4> <p>Starting at the <code>Top Left</code> again, since the line runs from left to right, the <code>X</code> value of the left vertex is <code>0</code>. The <code>Y</code> value changes in a fashion similar to the way the <code>X</code> value changed in the vertical line. The four horizontal lines have the <code>Y</code> values as: <code>0, 300, 600, 900</code>.</p> <p>Use the <code>- half_thickness</code> logic again to calculate <code>Y</code>. This shifts the <code>Y</code> value of each vertex a small amount to create thickness.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>Top Right</code> vertex, at the far right side, is <code>canvas_width</code> pixels away. The <code>Y</code> value here is the same as <code>Top Left</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>canvas_width<span class="token punctuation">,</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>For the <code>Bottom Right</code> vertex, the <code>X</code> value stays the same. Add thickness to shift the value towards the bottom.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>canvas_width<span class="token punctuation">,</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>X</code> value of the last vertex, <code>Bottom Left</code>, is at the far left, <code>0</code>. Shift the <code>Y</code> value towards the bottom by adding thickness again.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Both vertical and horizontal lines are now ready and the loop ends here.</p> <h4 id="improving-the-game-scene-rendering"><a href="#improving-the-game-scene-rendering" class="header-anchor">#</a> Improving the Game Scene Rendering</h4> <p>After the loop, turn the vertices to a quad variable of type <code>geometry::vertex_array</code>, which are rectangles. Assign this variable to the <code>grid_entity</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Assign the vertex array to the grid entity</span>
registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">,</span> lines<span class="token punctuation">,</span> geometry<span class="token operator">::</span>vertex_geometry_type<span class="token operator">::</span>quads<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Tag the grid as <code>game_scene</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Assign the game_scene tag to the grid_entity (_hs means hashed_string)</span>
registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Set the grid to appear at <code>layer 0</code> of the scene and return the prepared grid.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Draw the grid on the most deep layer, 0</span>
registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//! Return the fresh entity</span>
<span class="token keyword">return</span> grid_entity<span class="token punctuation">;</span>
</code></pre></div><p>Note that there is a small issue with adding and substracting <code>half_thickness</code> for the values at the edges of the screen. Because the top border and left border of the screen are at coordinate <code>0</code>, subtracting <code>half_thickness</code> makes half of the associated rectangle appear out of the screen. The same effect occurs with the bottom border and the right border. This is not as clean of a solution as the game project requires.</p> <div><img src="/tic-tac-toe-tutorial/border_problem.png"></div> <p>To solve this, push the top border down, the left border to the right, the bottom border upwards, and the right border to the left. This keeps the rectangles within the screen.</p> <p>This shift can be called <code>offset</code> as a variable. In the function loop, define <code>offset</code> at the beginning.</p> <p>For any given rectangle, there is no offset by default. Set the offset variables to <code>0</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">auto</span> offset_x <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
<span class="token keyword">auto</span> offset_y <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
</code></pre></div><p>If the current rectangle is one of the the first iteration, add the <code>half_thickness</code> value to push the rectangles inside. If the current rectangle is one of the last, subtract the <code>half_thickness</code> value to pull the rectangles inside.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    offset_x <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
    offset_y <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> nb_cells<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    offset_x <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
    offset_y <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For the vertical line, use the <code>offset X</code> value to push the lines left and right.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Vertical</span>
lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>For the horizontal line, use the <code>offset Y</code> value to push the lines up and down.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Horizontal</span>
lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span>            offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span>            offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Below is the complete function.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Contains all the function that will be used for logic and factory</span>
<span class="token keyword">namespace</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Factory for creating a Tic-Tac-Toe grid</span>
    entt<span class="token operator">::</span>entity <span class="token function">create_grid</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Retrieve canvas information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token comment">//! Entity creation</span>
        <span class="token keyword">auto</span> grid_entity <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! The vertices</span>
        std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex<span class="token operator">&gt;</span> lines<span class="token punctuation">{</span><span class="token number">8</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//! Retrieve constants information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>nb_cells<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> grid_thickness<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_thickness <span class="token operator">=</span> grid_thickness <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>
        <span class="token comment">//! The loop to create the grid</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>size_t counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nb_cells<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> counter <span class="token operator">+=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//! To avoid narrowing conversion</span>
            <span class="token keyword">auto</span> idx <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! First and last ones should be a bit inside, otherwise half of it is out of the screen</span>
            <span class="token keyword">auto</span> offset_x <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
            <span class="token keyword">auto</span> offset_y <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                offset_x <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
                offset_y <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> nb_cells<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                offset_x <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
                offset_y <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//! Prepare lines</span>
            <span class="token comment">//! Vertical</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">//! Horizontal</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//! Assign the vertex array to the grid entity</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">,</span> lines<span class="token punctuation">,</span> geometry<span class="token operator">::</span>vertex_geometry_type<span class="token operator">::</span>quads<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Assign the game_scene tag to the grid_entity (_hs means hashed_string)</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Draw the grid on the most deep layer, here 0</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Return the fresh entity</span>
        <span class="token keyword">return</span> grid_entity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="create-the-destructor-logic"><a href="#create-the-destructor-logic" class="header-anchor">#</a> Create the Destructor Logic</h4> <p>The following content organizes the destruction of the entities in the destructor. This is needed at the time of game reset.</p> <p>In the destructor, the logic iterates over and destroys all the entities that have the tag of the game scene.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token operator">~</span><span class="token function">game_scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
<span class="token punctuation">{</span>
    <span class="token comment">//! Retrieve the collection of entities from the game scene</span>
    <span class="token keyword">auto</span> view <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>view<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//! Iterate the collection and destroy each entities</span>
    entity_registry_<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> view<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//! Unset the Tic-Tac-Toe constants</span>
    entity_registry_<span class="token punctuation">.</span>unset<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="survey-of-current-progress"><a href="#survey-of-current-progress" class="header-anchor">#</a> Survey of Current Progress</h4> <p>Compiling and running the program at this point achieves the following result.</p> <div><img src="/tic-tac-toe-tutorial/tictactoe_real_grid.png"></div> <p>Here is the created code.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/world/world.app.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/graphic.system.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/input.system.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/scenes/scene.manager.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/math/vector.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/graphics/component.canvas.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/graphics/component.layer.hpp&gt;</span></span>
<span class="token comment">//! For convenience</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> antara<span class="token operator">::</span>gaming<span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_constants</span>
<span class="token punctuation">{</span>
    <span class="token function">tic_tac_toe_constants</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t nb_cells_per_axis_<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t width_<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t height_<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span>
            <span class="token function">nb_cells_per_axis</span><span class="token punctuation">(</span>nb_cells_per_axis_<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">cell_width</span><span class="token punctuation">(</span>width_ <span class="token operator">/</span> nb_cells_per_axis<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">cell_height</span><span class="token punctuation">(</span>height_ <span class="token operator">/</span> nb_cells_per_axis<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t nb_cells_per_axis<span class="token punctuation">;</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t cell_width<span class="token punctuation">;</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t cell_height<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">float</span> grid_thickness<span class="token punctuation">{</span><span class="token number">20.0f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//! Contains all the functions used for logic and factory</span>
<span class="token keyword">namespace</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Factory for creating a tic-tac-toe grid</span>
    entt<span class="token operator">::</span>entity <span class="token function">create_grid</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! retrieve canvas information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token comment">//! entity creation</span>
        <span class="token keyword">auto</span> grid_entity <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! the vertices</span>
        std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex<span class="token operator">&gt;</span> lines<span class="token punctuation">{</span><span class="token number">8</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//! retrieve constants information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>nb_cells<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> grid_thickness<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_thickness <span class="token operator">=</span> grid_thickness <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>
        <span class="token comment">//! the loop to create the grid</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>size_t counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nb_cells<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> counter <span class="token operator">+=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//! to avoid narrowing conversion</span>
            <span class="token keyword">auto</span> idx <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! first and last ones should be a bit inside, otherwise half of it is out of the screen</span>
            <span class="token keyword">auto</span> offset_x <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
            <span class="token keyword">auto</span> offset_y <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                offset_x <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
                offset_y <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> nb_cells<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                offset_x <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
                offset_y <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//! prepare lines</span>
            <span class="token comment">//! vertical</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">//! horizontal</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//! assign the vertex array to the grid entity</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">,</span> lines<span class="token punctuation">,</span> geometry<span class="token operator">::</span>vertex_geometry_type<span class="token operator">::</span>quads<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! assign the game_scene tag to the grid_entity (_hs means hashed_string)</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! draw the grid on the most deep layer, here 0.</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! return the fresh entity</span>
        <span class="token keyword">return</span> grid_entity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">game_scene</span> final <span class="token operator">:</span> <span class="token keyword">public</span> scenes<span class="token operator">::</span>base_scene
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">game_scene</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span> <span class="token function">base_scene</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! retrieve canvas information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">.</span>to<span class="token operator">&lt;</span>math<span class="token operator">::</span>vec2u<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! set the constants used in the program</span>
        entity_registry_<span class="token punctuation">.</span>set<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3ull</span><span class="token punctuation">,</span> canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! create the grid of tic tac toe</span>
        grid_entity_ <span class="token operator">=</span> <span class="token function">create_grid</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//! This function will not be used, because tic tac toe doesn't need an update for every frame</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">//! the scene name</span>
    std<span class="token operator">::</span>string <span class="token function">scene_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;game_scene&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">game_scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span>
        <span class="token comment">//! retrieve the collection of entities from the game scene</span>
        <span class="token keyword">auto</span> view <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>view<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! iterate the collection and destroy each entities</span>
        entity_registry_<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> view<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! unset the tic tac toe constants</span>
        entity_registry_<span class="token punctuation">.</span>unset<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">//! the entity representing the tic-tac-toe grid</span>
    entt<span class="token operator">::</span>entity grid_entity_<span class="token punctuation">{</span>entt<span class="token operator">::</span>null<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//! the game world</span>
<span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_world</span> <span class="token operator">:</span> <span class="token base-clause">world<span class="token operator">::</span><span class="token class-name">app</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//! the game entry point</span>
    <span class="token function">tic_tac_toe_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! load the graphical system</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>graphic_system <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>graphic_system<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! load the input system with the window from the graphical system</span>
        system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>input_system<span class="token operator">&gt;</span><span class="token punctuation">(</span>graphic_system<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! load the scenes manager</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>scene_manager <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>scenes<span class="token operator">::</span>manager<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! change the current_scene to &quot;game_scene&quot; by pushing it</span>
        scene_manager<span class="token punctuation">.</span><span class="token function">change_scene</span><span class="token punctuation">(</span>std<span class="token operator">::</span>make_unique<span class="token operator">&lt;</span>game_scene<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! declare the world</span>
    tic_tac_toe_world game<span class="token punctuation">;</span>
    <span class="token comment">//! run the game</span>
    <span class="token keyword">return</span> game<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="create-the-board-the-x-and-o-graphics-and-the-game-logic"><a href="#create-the-board-the-x-and-o-graphics-and-the-game-logic" class="header-anchor">#</a> Create the Board, the X and O Graphics, and the Game Logic</h2> <p>The game requires a <code>cell_state</code> variable to indicate whether the cell is empty, or marked <code>x</code> or <code>y</code>.</p> <p>Use <code>enum</code> for this effect.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">enum</span> <span class="token class-name">cell_state</span>
<span class="token punctuation">{</span>
    empty<span class="token punctuation">,</span>
    player_x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    player_y <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="create-the-board"><a href="#create-the-board" class="header-anchor">#</a> Create the Board</h4> <p>Create a <code>3x3</code> board. Accept the value <code>3</code> in a parameter variable named <code>nb_cells_per_axis</code>.</p> <p>The board is a <code>vector</code> of <code>9</code> <code>cell_state</code> instances and all are marked <code>empty</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> <span class="token function">create_board</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t nb_cells_per_axis<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> <span class="token function">board</span><span class="token punctuation">(</span>nb_cells_per_axis <span class="token operator">*</span> nb_cells_per_axis<span class="token punctuation">,</span> cell_state<span class="token operator">::</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> board<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="display-x"><a href="#display-x" class="header-anchor">#</a> Display X</h4> <p>The function to display cell states has <code>row</code> and <code>column</code> parameters.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">create_x</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
</code></pre></div><p>Develop the constants that are stored for reuse, such as <code>nb_cells</code>, <code>cell_width</code>, <code>cell_height</code> and <code>grid_thickness</code>. Then create other helpful constants as <code>half_box_side</code>, <code>center_x</code>, <code>center_y</code> which is the center position of that specific cell.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">auto</span><span class="token punctuation">[</span>nb_cells<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> grid_thickness<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">auto</span> half_box_side <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">fmin</span><span class="token punctuation">(</span>cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.25f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">auto</span> center_x <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>cell_width <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> column <span class="token operator">*</span> cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">auto</span> center_y <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>cell_height <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> row <span class="token operator">*</span> cell_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Make an <code>X</code> using two lines. As before, every line is a <code>quad</code> which has <code>4</code> vertices.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">auto</span> x_entity <span class="token operator">=</span> entity_registry<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex<span class="token operator">&gt;</span> lines<span class="token punctuation">{</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Every vertex of the <code>X</code> has a magenta color.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;&amp;</span>current_vertex<span class="token operator">:</span> lines<span class="token punctuation">)</span> current_vertex<span class="token punctuation">.</span>pixel_color <span class="token operator">=</span> graphics<span class="token operator">::</span>magenta<span class="token punctuation">;</span>
</code></pre></div><p>As before, set the position of every single vertex. The order is <code>Top Left</code>, <code>Top Right</code>, <code>Bottom Left</code>, <code>Bottom Right</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// Top-left to Bottom-right</span>
lines<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// Top-right to Bottom-left</span>
lines<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
lines<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Create a <code>geometry::vertex_array</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">,</span> lines<span class="token punctuation">,</span> geometry<span class="token operator">::</span>vertex_geometry_type<span class="token operator">::</span>quads<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Assign the <code>X</code> entity to <code>player_x</code> and <code>game_scene</code>.</p> <p>Set the layer as <code>1</code>. <code>X</code> and <code>O</code> need to render above the background layer <code>0</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;player_x&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="render-o"><a href="#render-o" class="header-anchor">#</a> Render O</h4> <p>The process of rendering <code>O</code> starts in the same manner as that of <code>X</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">create_o</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
<span class="token punctuation">{</span>
    <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">auto</span> half_box_side <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">fmin</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">,</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.25f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">auto</span> center_x <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>cell_width <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> column <span class="token operator">*</span> constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">auto</span> center_y <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>cell_height <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> row <span class="token operator">*</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To create the <code>O</code>, create an entity, assign it as a <code>geometry::circle</code>.</p> <p>Set the <code>fill_color</code> and <code>outline_color</code>, and set the entity position to the center of the cell.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">auto</span> o_entity <span class="token operator">=</span> geometry<span class="token operator">::</span><span class="token function">blueprint_circle</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">,</span> half_box_side<span class="token punctuation">,</span> graphics<span class="token operator">::</span>transparent<span class="token punctuation">,</span>
        transform<span class="token operator">::</span><span class="token function">position_2d</span><span class="token punctuation">(</span>center_x<span class="token punctuation">,</span> center_y<span class="token punctuation">)</span><span class="token punctuation">,</span>
        graphics<span class="token operator">::</span><span class="token function">outline_color</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>grid_thickness<span class="token punctuation">,</span> graphics<span class="token operator">::</span>cyan<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The process of rendering the <code>O</code> from this point is the same as that of <code>X</code>: assign the object to <code>game_scene</code> and set the object to layer <code>1</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>o_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>o_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="create-a-logic-system"><a href="#create-a-logic-system" class="header-anchor">#</a> Create a Logic System</h4> <p>Create an <code>ecs::logic_update_system</code> called <code>tic_tac_toe_logic</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">tic_tac_toe_logic</span> final <span class="token operator">:</span> <span class="token keyword">public</span> ecs<span class="token operator">::</span>logic_update_system<span class="token operator">&lt;</span>tic_tac_toe_logic<span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token operator">~</span><span class="token function">tic_tac_toe_logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Note</p> <p>The update function does not perform any actions because Tic-Tac-Toe is a passive game.</p> <p>Actual updates occur only when the mouse is clicked.</p></div> <p>Define the <code>play_turn</code> function.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Game logic</span>
<span class="token keyword">void</span> <span class="token function">play_turn</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
</code></pre></div><p>Set <code>index</code> according to the <code>row</code> and <code>column</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Retrieve constants</span>
<span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//! Which cell is clicked ?</span>
std<span class="token operator">::</span>size_t index <span class="token operator">=</span> row <span class="token operator">*</span> constants<span class="token punctuation">.</span>nb_cells_per_axis <span class="token operator">+</span> column<span class="token punctuation">;</span>
</code></pre></div><p>Ensure that <code>index</code> is inside the board and the clicked cell is empty.</p> <p>If so, set the board as the current <code>player_turn_</code>. If this value is <code>X</code>, call <code>create_x</code> for that cell. Otherwise, call <code>create_o</code>.</p> <p>Then change the turn to the other player.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>    <span class="token comment">//! Cell is available ?</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> board_<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> board_<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> cell_state<span class="token operator">::</span>empty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//! Change state of the cell to the current player</span>
        board_<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Create x or o based on the current player</span>
        player_turn_ <span class="token operator">==</span> x <span class="token operator">?</span> <span class="token function">create_x</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">,</span> row<span class="token punctuation">,</span> column<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">create_o</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">,</span> row<span class="token punctuation">,</span> column<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Switch player</span>
        player_turn_ <span class="token operator">=</span> <span class="token punctuation">(</span>player_turn_ <span class="token operator">==</span> player<span class="token operator">::</span>x<span class="token punctuation">)</span> <span class="token operator">?</span> player<span class="token operator">::</span>o <span class="token operator">:</span> player<span class="token operator">::</span>x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Call <code>play_turn</code> with the position of the mouse click.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">on_mouse_button_pressed</span><span class="token punctuation">(</span><span class="token keyword">const</span> event<span class="token operator">::</span>mouse_button_pressed <span class="token operator">&amp;</span>evt<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
 <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>current_game_state_ <span class="token operator">==</span> running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">//! Retrieve game constants.</span>
         <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//! Play one turn of the Tic-Tac-Toe</span>
         <span class="token function">play_turn</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>y <span class="token operator">/</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">,</span> evt<span class="token punctuation">.</span>x <span class="token operator">/</span> constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
         <span class="token comment">//! Reset the game</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><p>Assign the <code>on_mouse_button_pressed</code> event to the mouse click in the constructor.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">tic_tac_toe_logic</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry<span class="token punctuation">,</span> entt<span class="token operator">::</span>entity grid_entity<span class="token punctuation">,</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> board<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
        <span class="token operator">:</span> <span class="token function">system</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">grid_entity_</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">board_</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">move</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! stateless system</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//! subscribe to mouse_button event</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>sink<span class="token operator">&lt;</span>event<span class="token operator">::</span>mouse_button_pressed<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>connect<span class="token operator">&lt;</span><span class="token operator">&amp;</span>tic_tac_toe_logic<span class="token operator">::</span>on_mouse_button_pressed<span class="token operator">&gt;</span><span class="token punctuation">(</span>
            <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Also in this class are the enums <code>game_state</code> and <code>player</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Private enums</span>
<span class="token keyword">enum</span> <span class="token class-name">game_state</span>
<span class="token punctuation">{</span>
    running<span class="token punctuation">,</span>
    player_x_won <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    player_y_won <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
    tie<span class="token punctuation">,</span>
    quit
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">enum</span> <span class="token class-name">player</span>
<span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    o <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Also develop the other member variables, such as <code>grid</code>, <code>state board</code>, <code>game state</code> and <code>player turn</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Private members variable</span>
entt<span class="token operator">::</span>entity grid_entity_<span class="token punctuation">{</span>entt<span class="token operator">::</span>null<span class="token punctuation">}</span><span class="token punctuation">;</span>
std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> board_<span class="token punctuation">;</span>
game_state current_game_state_<span class="token punctuation">{</span>game_state<span class="token operator">::</span>running<span class="token punctuation">}</span><span class="token punctuation">;</span>
player player_turn_<span class="token punctuation">{</span>player<span class="token operator">::</span>x<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>After the class definition and out of the class scope give a name to the system.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Give a name to the system</span>
<span class="token function">REFL_AUTO</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>tic_tac_toe_logic<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In the constructor of the <code>game_scene</code> create the board and the logic system.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Create the board of the tic tac toe</span>
<span class="token keyword">auto</span> board <span class="token operator">=</span> <span class="token function">create_board</span><span class="token punctuation">(</span>tictactoe_constants<span class="token punctuation">.</span>nb_cells_per_axis<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//! Create the logic game system and give the fresh grid entity and the fresh board.</span>
<span class="token keyword">this</span><span class="token operator">-&gt;</span>system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>tic_tac_toe_logic<span class="token operator">&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div><img src="/tic-tac-toe-tutorial/tictactoe_board.png"></div> <p>The code up to this point in the tutorial.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/world/world.app.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/graphic.system.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/input.system.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/scenes/scene.manager.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/math/vector.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/graphics/component.canvas.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/graphics/component.layer.hpp&gt;</span></span>
<span class="token comment">//! For convenience</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> antara<span class="token operator">::</span>gaming<span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_constants</span>
<span class="token punctuation">{</span>
    <span class="token function">tic_tac_toe_constants</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t nb_cells_per_axis_<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t width_<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t height_<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span>
            <span class="token function">nb_cells_per_axis</span><span class="token punctuation">(</span>nb_cells_per_axis_<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">cell_width</span><span class="token punctuation">(</span>width_ <span class="token operator">/</span> nb_cells_per_axis<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">cell_height</span><span class="token punctuation">(</span>height_ <span class="token operator">/</span> nb_cells_per_axis<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t nb_cells_per_axis<span class="token punctuation">;</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t cell_width<span class="token punctuation">;</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t cell_height<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">float</span> grid_thickness<span class="token punctuation">{</span><span class="token number">20.0f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">enum</span> <span class="token class-name">cell_state</span>
<span class="token punctuation">{</span>
    empty<span class="token punctuation">,</span>
    player_x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    player_y <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//! Contains all the functions used for logic and factory</span>
<span class="token keyword">namespace</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Factory for creating a tic-tac-toe grid</span>
    entt<span class="token operator">::</span>entity <span class="token function">create_grid</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! retrieve canvas information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token comment">//! entity creation</span>
        <span class="token keyword">auto</span> grid_entity <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! the vertices</span>
        std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex<span class="token operator">&gt;</span> lines<span class="token punctuation">{</span><span class="token number">8</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//! retrieve constants information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>nb_cells<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> grid_thickness<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_thickness <span class="token operator">=</span> grid_thickness <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>
        <span class="token comment">//! the loop to create the grid</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>size_t counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nb_cells<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> counter <span class="token operator">+=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//! to avoid narrowing conversion</span>
            <span class="token keyword">auto</span> idx <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! first and last ones should be a bit inside, otherwise half of it is out of the screen</span>
            <span class="token keyword">auto</span> offset_x <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
            <span class="token keyword">auto</span> offset_y <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                offset_x <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
                offset_y <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> nb_cells<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                offset_x <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
                offset_y <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//! prepare lines</span>
            <span class="token comment">//! vertical</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">//! horizontal</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//! assign the vertex array to the grid entity</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">,</span> lines<span class="token punctuation">,</span> geometry<span class="token operator">::</span>vertex_geometry_type<span class="token operator">::</span>quads<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! assign the game_scene tag to the grid_entity (_hs means hashed_string)</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Draw the grid on the deepest layer, here 0.</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! return the fresh entity</span>
        <span class="token keyword">return</span> grid_entity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> <span class="token function">create_board</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t nb_cells_per_axis<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> <span class="token function">board</span><span class="token punctuation">(</span>nb_cells_per_axis <span class="token operator">*</span> nb_cells_per_axis<span class="token punctuation">,</span> cell_state<span class="token operator">::</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> board<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">create_x</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>nb_cells<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> grid_thickness<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_box_side <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">fmin</span><span class="token punctuation">(</span>cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.25f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> center_x <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>cell_width <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> column <span class="token operator">*</span> cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> center_y <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>cell_height <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> row <span class="token operator">*</span> cell_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> x_entity <span class="token operator">=</span> entity_registry<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex<span class="token operator">&gt;</span> lines<span class="token punctuation">{</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;&amp;</span>current_vertex<span class="token operator">:</span> lines<span class="token punctuation">)</span> current_vertex<span class="token punctuation">.</span>pixel_color <span class="token operator">=</span> graphics<span class="token operator">::</span>magenta<span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_thickness <span class="token operator">=</span> grid_thickness <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>
        <span class="token comment">// Top-left to Bottom-right</span>
        lines<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// Top-right to Bottom-left</span>
        lines<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">,</span> lines<span class="token punctuation">,</span> geometry<span class="token operator">::</span>vertex_geometry_type<span class="token operator">::</span>quads<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;player_x&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">create_o</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_box_side <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">fmin</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">,</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.25f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> center_x <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>cell_width <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> column <span class="token operator">*</span> constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> center_y <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>cell_height <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> row <span class="token operator">*</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> o_entity <span class="token operator">=</span> geometry<span class="token operator">::</span><span class="token function">blueprint_circle</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">,</span> half_box_side<span class="token punctuation">,</span> graphics<span class="token operator">::</span>transparent<span class="token punctuation">,</span>
                transform<span class="token operator">::</span><span class="token function">position_2d</span><span class="token punctuation">(</span>center_x<span class="token punctuation">,</span> center_y<span class="token punctuation">)</span><span class="token punctuation">,</span>
                graphics<span class="token operator">::</span><span class="token function">outline_color</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>grid_thickness<span class="token punctuation">,</span> graphics<span class="token operator">::</span>cyan<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>o_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>o_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">tic_tac_toe_logic</span> final <span class="token operator">:</span> <span class="token keyword">public</span> ecs<span class="token operator">::</span>logic_update_system<span class="token operator">&lt;</span>tic_tac_toe_logic<span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token operator">~</span><span class="token function">tic_tac_toe_logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">on_mouse_button_pressed</span><span class="token punctuation">(</span><span class="token keyword">const</span> event<span class="token operator">::</span>mouse_button_pressed <span class="token operator">&amp;</span>evt<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>current_game_state_ <span class="token operator">==</span> running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//! Retrieve game constants.</span>
            <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! Play one turn of the Tic-Tac-Toe</span>
            <span class="token function">play_turn</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>y <span class="token operator">/</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">,</span> evt<span class="token punctuation">.</span>x <span class="token operator">/</span> constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//! Reset the game</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">tic_tac_toe_logic</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry<span class="token punctuation">,</span> entt<span class="token operator">::</span>entity grid_entity<span class="token punctuation">,</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> board<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
            <span class="token operator">:</span> <span class="token function">system</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">grid_entity_</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">board_</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">move</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! stateless system</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! subscribe to mouse_button event</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>sink<span class="token operator">&lt;</span>event<span class="token operator">::</span>mouse_button_pressed<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>connect<span class="token operator">&lt;</span><span class="token operator">&amp;</span>tic_tac_toe_logic<span class="token operator">::</span>on_mouse_button_pressed<span class="token operator">&gt;</span><span class="token punctuation">(</span>
                <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">//! Game logic</span>
    <span class="token keyword">void</span> <span class="token function">play_turn</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Retrieve constants</span>
        <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Which cell is clicked ?</span>
        std<span class="token operator">::</span>size_t index <span class="token operator">=</span> row <span class="token operator">*</span> constants<span class="token punctuation">.</span>nb_cells_per_axis <span class="token operator">+</span> column<span class="token punctuation">;</span>
        <span class="token comment">//! Cell is available ?</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> board_<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> board_<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> cell_state<span class="token operator">::</span>empty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//! change state of the cell to the current player</span>
            board_<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! create x or o based on the current player</span>
            player_turn_ <span class="token operator">==</span> x <span class="token operator">?</span> <span class="token function">create_x</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">,</span> row<span class="token punctuation">,</span> column<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">create_o</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">,</span> row<span class="token punctuation">,</span> column<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! switch player</span>
            player_turn_ <span class="token operator">=</span> <span class="token punctuation">(</span>player_turn_ <span class="token operator">==</span> player<span class="token operator">::</span>x<span class="token punctuation">)</span> <span class="token operator">?</span> player<span class="token operator">::</span>o <span class="token operator">:</span> player<span class="token operator">::</span>x<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">//! Private enums</span>
    <span class="token keyword">enum</span> <span class="token class-name">game_state</span>
    <span class="token punctuation">{</span>
        running<span class="token punctuation">,</span>
        player_x_won <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        player_y_won <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
        tie<span class="token punctuation">,</span>
        quit
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">enum</span> <span class="token class-name">player</span>
    <span class="token punctuation">{</span>
        x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        o <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">//! Private members variable</span>
    entt<span class="token operator">::</span>entity grid_entity_<span class="token punctuation">{</span>entt<span class="token operator">::</span>null<span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> board_<span class="token punctuation">;</span>
    game_state current_game_state_<span class="token punctuation">{</span>game_state<span class="token operator">::</span>running<span class="token punctuation">}</span><span class="token punctuation">;</span>
    player player_turn_<span class="token punctuation">{</span>player<span class="token operator">::</span>x<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//! Provide the system with a name</span>
<span class="token function">REFL_AUTO</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>tic_tac_toe_logic<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">game_scene</span> final <span class="token operator">:</span> <span class="token keyword">public</span> scenes<span class="token operator">::</span>base_scene
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">game_scene</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span> <span class="token function">base_scene</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Retrieve canvas information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">.</span>to<span class="token operator">&lt;</span>math<span class="token operator">::</span>vec2u<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Set the constants that will be used in the program</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>tictactoe_constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>set<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3ull</span><span class="token punctuation">,</span> canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Create the grid of the tic tac toe</span>
        <span class="token keyword">auto</span> grid_entity <span class="token operator">=</span> <span class="token function">create_grid</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Create the board of the tic tac toe</span>
        <span class="token keyword">auto</span> board <span class="token operator">=</span> <span class="token function">create_board</span><span class="token punctuation">(</span>tictactoe_constants<span class="token punctuation">.</span>nb_cells_per_axis<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Create the logic game system and give the fresh grid entity and the fresh board.</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>tic_tac_toe_logic<span class="token operator">&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//! This function will not be used, because tic tac toe doesn't need an update every frame.</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">//! the scene name</span>
    std<span class="token operator">::</span>string <span class="token function">scene_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;game_scene&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">game_scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span>
        <span class="token comment">//! Retrieve the collection of entities from the game scene</span>
        <span class="token keyword">auto</span> view <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>view<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Iterate the collection and destroy each entities</span>
        entity_registry_<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> view<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Unset the tic tac toe constants</span>
        entity_registry_<span class="token punctuation">.</span>unset<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    ecs<span class="token operator">::</span>system_manager system_manager_<span class="token punctuation">{</span>entity_registry_<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//! The game world</span>
<span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_world</span> <span class="token operator">:</span> <span class="token base-clause">world<span class="token operator">::</span><span class="token class-name">app</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//! The game entry point</span>
    <span class="token function">tic_tac_toe_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Load the graphical system</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>graphic_system <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>graphic_system<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Load the input system with the window from the graphical system</span>
        system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>input_system<span class="token operator">&gt;</span><span class="token punctuation">(</span>graphic_system<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Load the scenes manager</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>scene_manager <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>scenes<span class="token operator">::</span>manager<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Change the current_scene to &quot;game_scene&quot; by pushing it.</span>
        scene_manager<span class="token punctuation">.</span><span class="token function">change_scene</span><span class="token punctuation">(</span>std<span class="token operator">::</span>make_unique<span class="token operator">&lt;</span>game_scene<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Declare the world</span>
    tic_tac_toe_world game<span class="token punctuation">;</span>
    <span class="token comment">//! Run the game</span>
    <span class="token keyword">return</span> game<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="win-tie-conditions-and-resetting-the-game"><a href="#win-tie-conditions-and-resetting-the-game" class="header-anchor">#</a> Win, Tie Conditions, and Resetting the Game</h2> <p>The game requires final conditions, such as <code>win</code>, <code>tie</code>, and the ability to the reset the game.</p> <h4 id="create-reset-capabilities"><a href="#create-reset-capabilities" class="header-anchor">#</a> Create Reset Capabilities</h4> <p>Create a blank <code>reset_event</code> struct.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">reset_event</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Define the reset event callback. This calls the destructor and then calls the constructor again.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//! Callback</span>
<span class="token keyword">void</span> <span class="token function">on_reset_event</span><span class="token punctuation">(</span><span class="token keyword">const</span> reset_event <span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
<span class="token punctuation">{</span>
    entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>entity_registry_<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token operator">~</span><span class="token function">game_scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token function">game_scene</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Subscribe to this reset event in the <code>game_scene</code> constructor.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">game_scene</span> final <span class="token operator">:</span> <span class="token keyword">public</span> scenes<span class="token operator">::</span>base_scene
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">game_scene</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span> <span class="token function">base_scene</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Subscribe to reset event</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>sink<span class="token operator">&lt;</span>reset_event<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>connect<span class="token operator">&lt;</span><span class="token operator">&amp;</span>game_scene<span class="token operator">::</span>on_reset_event<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Remove this event in the class destructor.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token operator">~</span><span class="token function">tic_tac_toe_logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>sink<span class="token operator">&lt;</span>event<span class="token operator">::</span>mouse_button_pressed<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Trigger this when the mouse button is pressed and the game state is not <code>running</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>trigger<span class="token operator">&lt;</span>reset_event<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token keyword">void</span> <span class="token function">on_mouse_button_pressed</span><span class="token punctuation">(</span><span class="token keyword">const</span> event<span class="token operator">::</span>mouse_button_pressed <span class="token operator">&amp;</span>evt<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>current_game_state_ <span class="token operator">==</span> running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//! Retrieve game constants.</span>
        <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Play one turn of the Tic-Tac-Toe</span>
        <span class="token function">play_turn</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>y <span class="token operator">/</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">,</span> evt<span class="token punctuation">.</span>x <span class="token operator">/</span> constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//! Reset the game</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>trigger<span class="token operator">&lt;</span>reset_event<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="create-final-conditions"><a href="#create-final-conditions" class="header-anchor">#</a> Create Final Conditions</h4> <p>Define the checks for <code>win</code> and <code>tie</code> conditions.</p> <p>Start with the winning condition.</p> <p>Check the current player’s <code>win</code> situation.</p> <p>In this function, check every cell and count how many are marked as <code>current player</code>. Perform this action separately in two variables: <code>row_count</code> and <code>column_count</code>. If any of these two reach the <code>nb_cells</code> value, which is <code>3</code>, the player wins and the function returns <code>true</code>.</p> <p>Count the diagonal lines and check <code>nb_cells</code> as before.</p> <p>If nothing has reached <code>3</code>, return <code>false</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token punctuation">[</span><span class="token punctuation">[</span>nodiscard<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">bool</span> <span class="token function">did_current_player_win_the_game</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">noexcept</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>size_t row_count<span class="token punctuation">{</span><span class="token number">0u</span><span class="token punctuation">}</span><span class="token punctuation">,</span> column_count<span class="token punctuation">{</span><span class="token number">0u</span><span class="token punctuation">}</span><span class="token punctuation">,</span> diag1_count<span class="token punctuation">{</span><span class="token number">0u</span><span class="token punctuation">}</span><span class="token punctuation">,</span> diag2_count<span class="token punctuation">{</span><span class="token number">0u</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">auto</span><span class="token punctuation">[</span>nb_cells<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> _<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nb_cells<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>size_t j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nb_cells<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//! Check rows</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>board_<span class="token punctuation">[</span>i <span class="token operator">*</span> nb_cells <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">)</span>
                row_count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token comment">//! Check columns</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>board_<span class="token punctuation">[</span>j <span class="token operator">*</span> nb_cells <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">)</span>
                column_count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//! Check condition</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>row_count <span class="token operator">&gt;=</span> nb_cells <span class="token operator">||</span> column_count <span class="token operator">&gt;=</span> nb_cells<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//! Reset rows and columns</span>
        row_count <span class="token operator">=</span> <span class="token number">0u</span><span class="token punctuation">,</span> column_count <span class="token operator">=</span> <span class="token number">0u</span><span class="token punctuation">;</span>
        <span class="token comment">//! Diag1 count</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>board_<span class="token punctuation">[</span>i <span class="token operator">*</span> nb_cells <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">)</span>
            diag1_count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">//! Second diag count</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>board_<span class="token punctuation">[</span>i <span class="token operator">*</span> nb_cells <span class="token operator">+</span> nb_cells <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">)</span>
            diag2_count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//! Condition</span>
    <span class="token keyword">return</span> diag1_count <span class="token operator">&gt;=</span> nb_cells <span class="token operator">||</span> diag2_count <span class="token operator">&gt;=</span> nb_cells<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If all the cells are filled and there is no <code>win</code> condition, the game is a tie.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token punctuation">[</span><span class="token punctuation">[</span>nodiscard<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">bool</span> <span class="token function">is_tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">noexcept</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span>board_<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span>board_<span class="token punctuation">)</span><span class="token punctuation">,</span> cell_state<span class="token operator">::</span>empty<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="set-colors-for-the-conditions"><a href="#set-colors-for-the-conditions" class="header-anchor">#</a> Set Colors for the Conditions</h4> <p>Use these two conditions to check functions in a larger function that is called later.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">check_winning_condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
</code></pre></div><p>Inside this function define a functor <code>make_screen</code> that sets the color of the grid.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">auto</span> make_screen <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span>graphics<span class="token operator">::</span>color clr_winner<span class="token punctuation">,</span>
                            entt<span class="token operator">::</span>entity entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">auto</span> <span class="token operator">&amp;</span>array_cmp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>entity_registry_<span class="token punctuation">.</span>get<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>v <span class="token operator">:</span> array_cmp<span class="token punctuation">.</span>vertices<span class="token punctuation">)</span> v<span class="token punctuation">.</span>pixel_color <span class="token operator">=</span> clr_winner<span class="token punctuation">;</span>
    entity_registry_<span class="token punctuation">.</span>replace<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> array_cmp<span class="token punctuation">.</span>vertices<span class="token punctuation">,</span> array_cmp<span class="token punctuation">.</span>geometry_type<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Using this functor, make another functor, <code>make_player_win_screen</code>, that gives the winner’s color as an argument.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">auto</span> make_player_win_screen <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">,</span> make_screen<span class="token punctuation">]</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>entity entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">auto</span> winning_color <span class="token operator">=</span> player_turn_ <span class="token operator">==</span> player<span class="token operator">::</span>x <span class="token operator">?</span> graphics<span class="token operator">::</span>magenta <span class="token operator">:</span> graphics<span class="token operator">::</span>cyan<span class="token punctuation">;</span>
    <span class="token function">make_screen</span><span class="token punctuation">(</span>winning_color<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Likewise, create another which feeds a different color when the game is a tie.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">auto</span> make_tie_screen <span class="token operator">=</span> <span class="token punctuation">[</span>make_screen<span class="token punctuation">]</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>entity entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">make_screen</span><span class="token punctuation">(</span>graphics<span class="token operator">::</span>yellow<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Check if the current player won the game. If not, check if the game is not a tie.</p> <p>Set the game state accordingly and call the proper functor.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">did_current_player_win_the_game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    current_game_state_ <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>game_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">make_player_win_screen</span><span class="token punctuation">(</span>grid_entity_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    current_game_state_ <span class="token operator">=</span> game_state<span class="token operator">::</span>tie<span class="token punctuation">;</span>
    <span class="token function">make_tie_screen</span><span class="token punctuation">(</span>grid_entity_<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The function <code>check_winning_condition</code> now appears as follows.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">check_winning_condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
<span class="token punctuation">{</span>
    <span class="token keyword">auto</span> make_screen <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span>graphics<span class="token operator">::</span>color clr_winner<span class="token punctuation">,</span>
                              entt<span class="token operator">::</span>entity entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>array_cmp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>entity_registry_<span class="token punctuation">.</span>get<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>v <span class="token operator">:</span> array_cmp<span class="token punctuation">.</span>vertices<span class="token punctuation">)</span> v<span class="token punctuation">.</span>pixel_color <span class="token operator">=</span> clr_winner<span class="token punctuation">;</span>
        entity_registry_<span class="token punctuation">.</span>replace<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> array_cmp<span class="token punctuation">.</span>vertices<span class="token punctuation">,</span> array_cmp<span class="token punctuation">.</span>geometry_type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">auto</span> make_player_win_screen <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">,</span> make_screen<span class="token punctuation">]</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>entity entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> winning_color <span class="token operator">=</span> player_turn_ <span class="token operator">==</span> player<span class="token operator">::</span>x <span class="token operator">?</span> graphics<span class="token operator">::</span>magenta <span class="token operator">:</span> graphics<span class="token operator">::</span>cyan<span class="token punctuation">;</span>
        <span class="token function">make_screen</span><span class="token punctuation">(</span>winning_color<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">auto</span> make_tie_screen <span class="token operator">=</span> <span class="token punctuation">[</span>make_screen<span class="token punctuation">]</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>entity entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">make_screen</span><span class="token punctuation">(</span>graphics<span class="token operator">::</span>yellow<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">did_current_player_win_the_game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        current_game_state_ <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>game_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">make_player_win_screen</span><span class="token punctuation">(</span>grid_entity_<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        current_game_state_ <span class="token operator">=</span> game_state<span class="token operator">::</span>tie<span class="token punctuation">;</span>
        <span class="token function">make_tie_screen</span><span class="token punctuation">(</span>grid_entity_<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Call this function in the end of <code>play_turn</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">play_turn</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Retrieve constants</span>
    <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//! Which cell is clicked ?</span>
    std<span class="token operator">::</span>size_t index <span class="token operator">=</span> row <span class="token operator">*</span> constants<span class="token punctuation">.</span>nb_cells_per_axis <span class="token operator">+</span> column<span class="token punctuation">;</span>
    <span class="token comment">//! Cell is available ?</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> board_<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> board_<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> cell_state<span class="token operator">::</span>empty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//! Change state of the cell to the current player</span>
        board_<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Create x or o based on the current player</span>
        player_turn_ <span class="token operator">==</span> x <span class="token operator">?</span> <span class="token function">create_x</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">,</span> row<span class="token punctuation">,</span> column<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">create_o</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">,</span> row<span class="token punctuation">,</span> column<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Check winning condition</span>
        <span class="token function">check_winning_condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Switch player</span>
        player_turn_ <span class="token operator">=</span> <span class="token punctuation">(</span>player_turn_ <span class="token operator">==</span> player<span class="token operator">::</span>x<span class="token punctuation">)</span> <span class="token operator">?</span> player<span class="token operator">::</span>o <span class="token operator">:</span> player<span class="token operator">::</span>x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The game is now complete.</p> <h4 id="during-the-match"><a href="#during-the-match" class="header-anchor">#</a> During the Match</h4> <div><img src="/tic-tac-toe-tutorial/tictactoe-playing.png"></div> <h4 id="when-player-x-wins"><a href="#when-player-x-wins" class="header-anchor">#</a> When Player X Wins</h4> <div><img src="/tic-tac-toe-tutorial/tictactoe-x-win.png"></div> <h4 id="when-player-o-wins"><a href="#when-player-o-wins" class="header-anchor">#</a> When Player O Wins</h4> <div><img src="/tic-tac-toe-tutorial/tictactoe-o-win.png"></div> <h4 id="a-tie"><a href="#a-tie" class="header-anchor">#</a> A Tie:</h4> <div><img src="/tic-tac-toe-tutorial/tictactoe-tie.png"></div> <h4 id="the-complete-game-code"><a href="#the-complete-game-code" class="header-anchor">#</a> The Complete Game Code</h4> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/world/world.app.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/graphic.system.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/sfml/input.system.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/scenes/scene.manager.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/math/vector.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/graphics/component.canvas.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;antara/gaming/graphics/component.layer.hpp&gt;</span></span>
<span class="token comment">//! For convenience</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> antara<span class="token operator">::</span>gaming<span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_constants</span>
<span class="token punctuation">{</span>
    <span class="token function">tic_tac_toe_constants</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t nb_cells_per_axis_<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t width_<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t height_<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span>
            <span class="token function">nb_cells_per_axis</span><span class="token punctuation">(</span>nb_cells_per_axis_<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">cell_width</span><span class="token punctuation">(</span>width_ <span class="token operator">/</span> nb_cells_per_axis<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">cell_height</span><span class="token punctuation">(</span>height_ <span class="token operator">/</span> nb_cells_per_axis<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t nb_cells_per_axis<span class="token punctuation">;</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t cell_width<span class="token punctuation">;</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>size_t cell_height<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">float</span> grid_thickness<span class="token punctuation">{</span><span class="token number">20.0f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">enum</span> <span class="token class-name">cell_state</span>
<span class="token punctuation">{</span>
    empty<span class="token punctuation">,</span>
    player_x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    player_y <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">reset_event</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//! Contains all the functions used for logic and factory</span>
<span class="token keyword">namespace</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Factory for creating a tic-tac-toe grid</span>
    entt<span class="token operator">::</span>entity <span class="token function">create_grid</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Retrieve canvas information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token comment">//! Entity creation</span>
        <span class="token keyword">auto</span> grid_entity <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! the vertices</span>
        std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex<span class="token operator">&gt;</span> lines<span class="token punctuation">{</span><span class="token number">8</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//! Retrieve constants information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>nb_cells<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> grid_thickness<span class="token punctuation">]</span> <span class="token operator">=</span> registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_thickness <span class="token operator">=</span> grid_thickness <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>
        <span class="token comment">//! the loop to create the grid</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>size_t counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nb_cells<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> counter <span class="token operator">+=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//! To avoid narrowing conversion</span>
            <span class="token keyword">auto</span> idx <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! First and last ones should be a bit inside, otherwise half of it is out of the screen</span>
            <span class="token keyword">auto</span> offset_x <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
            <span class="token keyword">auto</span> offset_y <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                offset_x <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
                offset_y <span class="token operator">+=</span> half_thickness<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> nb_cells<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                offset_x <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
                offset_y <span class="token operator">-=</span> half_thickness<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//! Prepare lines</span>
            <span class="token comment">//! Vertical</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> idx <span class="token operator">*</span> cell_width <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> canvas_height<span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">//! Horizontal</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">-</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> canvas_width<span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
            lines<span class="token punctuation">[</span>counter <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>offset_x <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">,</span> offset_y <span class="token operator">+</span> idx <span class="token operator">*</span> cell_height <span class="token operator">+</span> half_thickness<span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//! Assign the vertex array to the grid entity</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">,</span> lines<span class="token punctuation">,</span> geometry<span class="token operator">::</span>vertex_geometry_type<span class="token operator">::</span>quads<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Assign the game_scene tag to the grid_entity (_hs means hashed_string)</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Draw the grid on the deepest layer, here 0.</span>
        registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! give back the fresh entity</span>
        <span class="token keyword">return</span> grid_entity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> <span class="token function">create_board</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t nb_cells_per_axis<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> <span class="token function">board</span><span class="token punctuation">(</span>nb_cells_per_axis <span class="token operator">*</span> nb_cells_per_axis<span class="token punctuation">,</span> cell_state<span class="token operator">::</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> board<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">create_x</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>_<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> grid_thickness<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_box_side <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">fmin</span><span class="token punctuation">(</span>cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.25f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> center_x <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>cell_width <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> column <span class="token operator">*</span> cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> center_y <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>cell_height <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> row <span class="token operator">*</span> cell_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> x_entity <span class="token operator">=</span> entity_registry<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex<span class="token operator">&gt;</span> lines<span class="token punctuation">{</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;&amp;</span>current_vertex<span class="token operator">:</span> lines<span class="token punctuation">)</span> current_vertex<span class="token punctuation">.</span>pixel_color <span class="token operator">=</span> graphics<span class="token operator">::</span>magenta<span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_thickness <span class="token operator">=</span> grid_thickness <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>
        <span class="token comment">// Top-left to Bottom-right</span>
        lines<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// Top-right to Bottom-left</span>
        lines<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">+</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">-</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">+</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        lines<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">{</span>center_x <span class="token operator">-</span> half_box_side <span class="token operator">-</span> half_thickness<span class="token punctuation">,</span> center_y <span class="token operator">+</span> half_box_side<span class="token punctuation">}</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">,</span> lines<span class="token punctuation">,</span> geometry<span class="token operator">::</span>vertex_geometry_type<span class="token operator">::</span>quads<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;player_x&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>x_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">create_o</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> half_box_side <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">fmin</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">,</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.25f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> center_x <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>cell_width <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> column <span class="token operator">*</span> constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">auto</span> center_y <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>cell_height <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">+</span> row <span class="token operator">*</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> o_entity <span class="token operator">=</span> geometry<span class="token operator">::</span><span class="token function">blueprint_circle</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">,</span> half_box_side<span class="token punctuation">,</span> graphics<span class="token operator">::</span>transparent<span class="token punctuation">,</span>
                                                   transform<span class="token operator">::</span><span class="token function">position_2d</span><span class="token punctuation">(</span>center_x<span class="token punctuation">,</span> center_y<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                   graphics<span class="token operator">::</span><span class="token function">outline_color</span><span class="token punctuation">(</span>constants<span class="token punctuation">.</span>grid_thickness<span class="token punctuation">,</span> graphics<span class="token operator">::</span>cyan<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>o_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity_registry<span class="token punctuation">.</span>assign<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>layer<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>o_entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">tic_tac_toe_logic</span> final <span class="token operator">:</span> <span class="token keyword">public</span> ecs<span class="token operator">::</span>logic_update_system<span class="token operator">&lt;</span>tic_tac_toe_logic<span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">on_mouse_button_pressed</span><span class="token punctuation">(</span><span class="token keyword">const</span> event<span class="token operator">::</span>mouse_button_pressed <span class="token operator">&amp;</span>evt<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>current_game_state_ <span class="token operator">==</span> running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//! Retrieve game constants.</span>
            <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! Play one turn of the Tic-Tac-Toe</span>
            <span class="token function">play_turn</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>y <span class="token operator">/</span> constants<span class="token punctuation">.</span>cell_height<span class="token punctuation">,</span> evt<span class="token punctuation">.</span>x <span class="token operator">/</span> constants<span class="token punctuation">.</span>cell_width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//! Reset the game</span>
            <span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>trigger<span class="token operator">&lt;</span>reset_event<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">tic_tac_toe_logic</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry<span class="token punctuation">,</span> entt<span class="token operator">::</span>entity grid_entity<span class="token punctuation">,</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> board<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
            <span class="token operator">:</span> <span class="token function">system</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">grid_entity_</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">board_</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">move</span><span class="token punctuation">(</span>board<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Stateless system</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Subscribe to mouse_button event</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>sink<span class="token operator">&lt;</span>event<span class="token operator">::</span>mouse_button_pressed<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>connect<span class="token operator">&lt;</span><span class="token operator">&amp;</span>tic_tac_toe_logic<span class="token operator">::</span>on_mouse_button_pressed<span class="token operator">&gt;</span><span class="token punctuation">(</span>
                <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">tic_tac_toe_logic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>sink<span class="token operator">&lt;</span>event<span class="token operator">::</span>mouse_button_pressed<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">//! Game logic</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>nodiscard<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">bool</span> <span class="token function">did_current_player_win_the_game</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        std<span class="token operator">::</span>size_t row_count<span class="token punctuation">{</span><span class="token number">0u</span><span class="token punctuation">}</span><span class="token punctuation">,</span> column_count<span class="token punctuation">{</span><span class="token number">0u</span><span class="token punctuation">}</span><span class="token punctuation">,</span> diag1_count<span class="token punctuation">{</span><span class="token number">0u</span><span class="token punctuation">}</span><span class="token punctuation">,</span> diag2_count<span class="token punctuation">{</span><span class="token number">0u</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>nb_cells<span class="token punctuation">,</span> cell_width<span class="token punctuation">,</span> cell_height<span class="token punctuation">,</span> _<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nb_cells<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>size_t j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nb_cells<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//! Check rows</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>board_<span class="token punctuation">[</span>i <span class="token operator">*</span> nb_cells <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    row_count<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token comment">//! Check columns</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>board_<span class="token punctuation">[</span>j <span class="token operator">*</span> nb_cells <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    column_count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//! Check condition</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>row_count <span class="token operator">&gt;=</span> nb_cells <span class="token operator">||</span> column_count <span class="token operator">&gt;=</span> nb_cells<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//! Reset rows and columns</span>
            row_count <span class="token operator">=</span> <span class="token number">0u</span><span class="token punctuation">,</span> column_count <span class="token operator">=</span> <span class="token number">0u</span><span class="token punctuation">;</span>
            <span class="token comment">//! Diag1 count</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>board_<span class="token punctuation">[</span>i <span class="token operator">*</span> nb_cells <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">)</span>
                diag1_count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token comment">//! Second diag count</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>board_<span class="token punctuation">[</span>i <span class="token operator">*</span> nb_cells <span class="token operator">+</span> nb_cells <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">)</span>
                diag2_count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//! Condition</span>
        <span class="token keyword">return</span> diag1_count <span class="token operator">&gt;=</span> nb_cells <span class="token operator">||</span> diag2_count <span class="token operator">&gt;=</span> nb_cells<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>nodiscard<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">bool</span> <span class="token function">is_tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span>board_<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span>board_<span class="token punctuation">)</span><span class="token punctuation">,</span> cell_state<span class="token operator">::</span>empty<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">check_winning_condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> make_screen <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span>graphics<span class="token operator">::</span>color clr_winner<span class="token punctuation">,</span>
                                  entt<span class="token operator">::</span>entity entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">auto</span> <span class="token operator">&amp;</span>array_cmp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>entity_registry_<span class="token punctuation">.</span>get<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>v <span class="token operator">:</span> array_cmp<span class="token punctuation">.</span>vertices<span class="token punctuation">)</span> v<span class="token punctuation">.</span>pixel_color <span class="token operator">=</span> clr_winner<span class="token punctuation">;</span>
            entity_registry_<span class="token punctuation">.</span>replace<span class="token operator">&lt;</span>geometry<span class="token operator">::</span>vertex_array<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> array_cmp<span class="token punctuation">.</span>vertices<span class="token punctuation">,</span> array_cmp<span class="token punctuation">.</span>geometry_type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> make_player_win_screen <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">,</span> make_screen<span class="token punctuation">]</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>entity entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">auto</span> winning_color <span class="token operator">=</span> player_turn_ <span class="token operator">==</span> player<span class="token operator">::</span>x <span class="token operator">?</span> graphics<span class="token operator">::</span>magenta <span class="token operator">:</span> graphics<span class="token operator">::</span>cyan<span class="token punctuation">;</span>
            <span class="token function">make_screen</span><span class="token punctuation">(</span>winning_color<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> make_tie_screen <span class="token operator">=</span> <span class="token punctuation">[</span>make_screen<span class="token punctuation">]</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>entity entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">make_screen</span><span class="token punctuation">(</span>graphics<span class="token operator">::</span>yellow<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">did_current_player_win_the_game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            current_game_state_ <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>game_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">make_player_win_screen</span><span class="token punctuation">(</span>grid_entity_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            current_game_state_ <span class="token operator">=</span> game_state<span class="token operator">::</span>tie<span class="token punctuation">;</span>
            <span class="token function">make_tie_screen</span><span class="token punctuation">(</span>grid_entity_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">play_turn</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t row<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t column<span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Retrieve constants</span>
        <span class="token keyword">auto</span> constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Which cell is clicked ?</span>
        std<span class="token operator">::</span>size_t index <span class="token operator">=</span> row <span class="token operator">*</span> constants<span class="token punctuation">.</span>nb_cells_per_axis <span class="token operator">+</span> column<span class="token punctuation">;</span>
        <span class="token comment">//! Cell is available ?</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> board_<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> board_<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> cell_state<span class="token operator">::</span>empty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//! Change state of the cell to the current player</span>
            board_<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span><span class="token punctuation">(</span>player_turn_<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! Create x or o based on the current player</span>
            player_turn_ <span class="token operator">==</span> x <span class="token operator">?</span> <span class="token function">create_x</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">,</span> row<span class="token punctuation">,</span> column<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">create_o</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">,</span> row<span class="token punctuation">,</span> column<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! Check winning condition</span>
            <span class="token function">check_winning_condition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//! Switch player</span>
            player_turn_ <span class="token operator">=</span> <span class="token punctuation">(</span>player_turn_ <span class="token operator">==</span> player<span class="token operator">::</span>x<span class="token punctuation">)</span> <span class="token operator">?</span> player<span class="token operator">::</span>o <span class="token operator">:</span> player<span class="token operator">::</span>x<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">//! Private enums</span>
    <span class="token keyword">enum</span> <span class="token class-name">game_state</span>
    <span class="token punctuation">{</span>
        running<span class="token punctuation">,</span>
        player_x_won <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        player_y_won <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
        tie<span class="token punctuation">,</span>
        quit
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">enum</span> <span class="token class-name">player</span>
    <span class="token punctuation">{</span>
        x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        o <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token comment">//! Private members variable</span>
    entt<span class="token operator">::</span>entity grid_entity_<span class="token punctuation">{</span>entt<span class="token operator">::</span>null<span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>cell_state<span class="token operator">&gt;</span> board_<span class="token punctuation">;</span>
    game_state current_game_state_<span class="token punctuation">{</span>game_state<span class="token operator">::</span>running<span class="token punctuation">}</span><span class="token punctuation">;</span>
    player player_turn_<span class="token punctuation">{</span>player<span class="token operator">::</span>x<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//! Provide the system with a name</span>
<span class="token function">REFL_AUTO</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>tic_tac_toe_logic<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">game_scene</span> final <span class="token operator">:</span> <span class="token keyword">public</span> scenes<span class="token operator">::</span>base_scene
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">game_scene</span><span class="token punctuation">(</span>entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>entity_registry<span class="token punctuation">)</span> <span class="token keyword">noexcept</span> <span class="token operator">:</span> <span class="token function">base_scene</span><span class="token punctuation">(</span>entity_registry<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Subscribe to reset event</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>dispatcher_<span class="token punctuation">.</span>sink<span class="token operator">&lt;</span>reset_event<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>connect<span class="token operator">&lt;</span><span class="token operator">&amp;</span>game_scene<span class="token operator">::</span>on_reset_event<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Retrieve canvas information</span>
        <span class="token keyword">auto</span><span class="token punctuation">[</span>canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">]</span> <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>ctx<span class="token operator">&lt;</span>graphics<span class="token operator">::</span>canvas_2d<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>size<span class="token punctuation">.</span>to<span class="token operator">&lt;</span>math<span class="token operator">::</span>vec2u<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Set the constants that will be used in the program</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>tictactoe_constants <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>set<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3ull</span><span class="token punctuation">,</span> canvas_width<span class="token punctuation">,</span> canvas_height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Create the grid of the tic tac toe</span>
        <span class="token keyword">auto</span> grid_entity <span class="token operator">=</span> <span class="token function">create_grid</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Create the board of the tic tac toe</span>
        <span class="token keyword">auto</span> board <span class="token operator">=</span> <span class="token function">create_board</span><span class="token punctuation">(</span>tictactoe_constants<span class="token punctuation">.</span>nb_cells_per_axis<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Create the logic game system and give the fresh grid entity and the fresh board.</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span>system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>tic_tac_toe_logic<span class="token operator">&gt;</span><span class="token punctuation">(</span>grid_entity<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//! This function will not be used, because tic tac toe doesn't need an update every frame.</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">//! The scene name</span>
    std<span class="token operator">::</span>string <span class="token function">scene_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;game_scene&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">game_scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span> final
    <span class="token punctuation">{</span>
        <span class="token comment">//! Retrieve the collection of entities from the game scene</span>
        <span class="token keyword">auto</span> view <span class="token operator">=</span> entity_registry_<span class="token punctuation">.</span>view<span class="token operator">&lt;</span>entt<span class="token operator">::</span>tag<span class="token operator">&lt;</span><span class="token string">&quot;game_scene&quot;</span>_hs<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Iterate the collection and destroy each entities</span>
        entity_registry_<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> view<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Unset the tic tac toe constants</span>
        entity_registry_<span class="token punctuation">.</span>unset<span class="token operator">&lt;</span>tic_tac_toe_constants<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//! Callback</span>
    <span class="token keyword">void</span> <span class="token function">on_reset_event</span><span class="token punctuation">(</span><span class="token keyword">const</span> reset_event <span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        entt<span class="token operator">::</span>registry <span class="token operator">&amp;</span>registry <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>entity_registry_<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token operator">~</span><span class="token function">game_scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token function">game_scene</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    ecs<span class="token operator">::</span>system_manager system_manager_<span class="token punctuation">{</span>entity_registry_<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//! The game world</span>
<span class="token keyword">struct</span> <span class="token class-name">tic_tac_toe_world</span> <span class="token operator">:</span> <span class="token base-clause">world<span class="token operator">::</span><span class="token class-name">app</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//! The game entry point</span>
    <span class="token function">tic_tac_toe_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">noexcept</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//! Load the graphical system</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>graphic_system <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>graphic_system<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Load the input system with the window from the graphical system</span>
        system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>sfml<span class="token operator">::</span>input_system<span class="token operator">&gt;</span><span class="token punctuation">(</span>graphic_system<span class="token punctuation">.</span><span class="token function">get_window</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Load the scenes manager</span>
        <span class="token keyword">auto</span> <span class="token operator">&amp;</span>scene_manager <span class="token operator">=</span> system_manager_<span class="token punctuation">.</span>create_system<span class="token operator">&lt;</span>scenes<span class="token operator">::</span>manager<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//! Change the current_scene to &quot;game_scene&quot; by pushing it.</span>
        scene_manager<span class="token punctuation">.</span><span class="token function">change_scene</span><span class="token punctuation">(</span>std<span class="token operator">::</span>make_unique<span class="token operator">&lt;</span>game_scene<span class="token operator">&gt;</span><span class="token punctuation">(</span>entity_registry_<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//! Declare the world</span>
    tic_tac_toe_world game<span class="token punctuation">;</span>
    <span class="token comment">//! Run the game</span>
    <span class="token keyword">return</span> game<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/komodoplatform/Documentation/edit/master/docs/basic-docs/antara/antara-tutorials/gaming-sdk-tutorial-3.md" target="_blank" rel="noopener noreferrer">Suggest an improvement for this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">a year ago</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c7b26f99.js" defer></script><script src="/assets/js/5.225be964.js" defer></script><script src="/assets/js/3.b0f5714b.js" defer></script><script src="/assets/js/57.243ace2f.js" defer></script>
  </body>
</html>
