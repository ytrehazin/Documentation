(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{471:function(s,t,a){"use strict";a.r(t);var e=a(49),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"blockscout-deployment-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#blockscout-deployment-guide"}},[s._v("#")]),s._v(" Blockscout deployment guide")]),s._v(" "),a("p",[s._v("This guide currently uses the following software versions:")]),s._v(" "),a("ul",[a("li",[s._v("Ubuntu-18.04 (Bionic) server")]),s._v(" "),a("li",[s._v("Openethereum (Parity): "),a("a",{attrs:{href:"https://github.com/openethereum/openethereum/releases/tag/v3.0.1",target:"_blank",rel:"noopener noreferrer"}},[s._v("v3.0.1-stable"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("BlockScout: "),a("code",[s._v("v3.2.0")])])]),s._v(" "),a("h2",{attrs:{id:"general-pre-requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#general-pre-requirements"}},[s._v("#")]),s._v(" General Pre-Requirements")]),s._v(" "),a("p",[s._v("Linux(Ubuntu or CentOS) server with root access, "),a("code",[s._v("4+ TB")]),s._v(" storage for "),a("a",{attrs:{href:"https://docs.blockscout.com/for-developers/information-and-settings/database-storage-requirements",target:"_blank",rel:"noopener noreferrer"}},[s._v("BlockScout database"),a("OutboundLink")],1),s._v(", "),a("code",[s._v("2+ TB")]),s._v(" storage for "),a("a",{attrs:{href:"https://openethereum.github.io/wiki/FAQ#what-are-the-parity-ethereum-disk-space-needs-and-overall-hardware-requirements",target:"_blank",rel:"noopener noreferrer"}},[s._v("ETH Mainnet archive node"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("Create a user with sudo privileges, ssh access, domain name, ensure basic server security")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),a("ul",[a("li",[s._v("bash commands below are for reference only, please do not copy/paste them mindlessly, or else you may expect to encounter broken links and weird paths.")]),s._v(" "),a("li",[s._v("Commands marked with "),a("code",[s._v("\\$")]),s._v(" should be executed as your user, under whom the blockscout service will be running. "),a("code",[s._v("\\#")]),s._v(" means the command should be run as root. "),a("code",[s._v("\\=\\#")]),s._v(" commands are executed in psql.")]),s._v(" "),a("li",[a("a",{attrs:{href:"https://docs.blockscout.com/for-developers/information-and-settings/requirements",target:"_blank",rel:"noopener noreferrer"}},[s._v("Blockscout reqs"),a("OutboundLink")],1),s._v(" seems to be outdated, you may use latest stable releases instead. Anyway, you will be notified by BlockScout later if some binary version is not supported.")])])]),s._v(" "),a("h2",{attrs:{id:"openethereum-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#openethereum-setup"}},[s._v("#")]),s._v(" Openethereum setup")]),s._v(" "),a("h3",{attrs:{id:"openethereum-pre-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#openethereum-pre-install"}},[s._v("#")]),s._v(" Openethereum Pre-Install")]),s._v(" "),a("p",[s._v("Prepare storage")]),s._v(" "),a("p",[s._v("Make sure your user has access to the storage mount/path AE: "),a("code",[s._v("/mnt/openeth/storage/path")])]),s._v(" "),a("h3",{attrs:{id:"get-binary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-binary"}},[s._v("#")]),s._v(" Get binary")]),s._v(" "),a("p",[s._v("Install basic deps: "),a("code",[s._v("build-essential cmake libudev-dev")])]),s._v(" "),a("p",[s._v("Download the latest precompiled version from "),a("a",{attrs:{href:"https://github.com/openethereum/openethereum/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("here"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" upgrade -y\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libudev-dev "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" build-essential cmake -y\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/openethereum/openethereum/releases/download/version/openethereum-linux-version.zip\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" -o openethereum-linux-version.zip -d openethereum\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" openethereum\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x ./openethereum\n")])])]),a("h3",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[s._v("#")]),s._v(" Configuration")]),s._v(" "),a("p",[s._v("Create an empty log file")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /mnt/openeth/storage/path/config/example.log\n")])])]),a("ul",[a("li",[s._v("Write configuration file, AE:")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /mnt/openeth/storage/path/config.toml\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("parity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"active"')]),s._v("\nrelease_track "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stable"')]),s._v("\nbase_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/.local/share/io.parity.ethereum"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("network"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nwarp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("misc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nlog_file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/mnt/openeth/storage/path/config/example.log"')]),s._v("\n\n")])])]),a("p",[s._v("Prepare the "),a("code",[s._v("systemd")]),s._v(" service file")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/systemd/system/openethereum.service\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("OpenEthereum\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("User")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("youruser\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Group")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yourusergroup\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/openethereum -c /mnt/openeth/storage/path/config.toml --jsonrpc-interface all --jsonrpc-apis  web3,eth,net,parity,pubsub,traces --ws-interface all --fat-db"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on --pruning"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("archive --ws-apis all --ws-origins all --ws-hosts  all\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on-failure\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KillSignal")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SIGHUP\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("default.target\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),a("p",[s._v("Official instructions can be found "),a("a",{attrs:{href:"https://docs.blockscout.com/for-developers/information-and-settings/client-settings-parity-geth-ganache#parity-client",target:"_blank",rel:"noopener noreferrer"}},[s._v("here"),a("OutboundLink")],1),s._v(".")])]),s._v(" "),a("p",[s._v("Allow the ports used by the openethereum client ("),a("code",[s._v("ports 30303/tcp, 8545/tcp, 8546/tcp")]),s._v(") through your firewall.")]),s._v(" "),a("p",[s._v("Test the "),a("code",[s._v("systemd")]),s._v(" service")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start openetherum\n")])])]),a("p",[s._v("Enable openethereum as service")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" openethereum.service\n")])])]),a("h2",{attrs:{id:"postgresql-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postgresql-setup"}},[s._v("#")]),s._v(" PostgreSQL setup")]),s._v(" "),a("h3",{attrs:{id:"postgresql-pre-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postgresql-pre-install"}},[s._v("#")]),s._v(" PostgreSQL Pre-Install")]),s._v(" "),a("p",[s._v("Prepare and mount storage for BlockScout DB")]),s._v(" "),a("h3",{attrs:{id:"install-postgresql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-postgresql"}},[s._v("#")]),s._v(" Install PostgreSQL")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PostgreSQL downloads"),a("OutboundLink")],1),s._v(" page suggests usage of different repositories based on the OS. For example, in Ubuntu:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" -c "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo \"deb http://apt.postgresql.org/pub/repos/apt "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("lsb_release -cs"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("-pgdg main\" > /etc/apt/sources.list.d/pgdg.list'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" postgresql-10\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),a("p",[s._v("BlockScout supports psql versions: "),a("code",[s._v("10.3+")]),s._v(", same as in the above example.")])]),s._v(" "),a("h3",{attrs:{id:"postgresql-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postgresql-configuration"}},[s._v("#")]),s._v(" PostgreSQL configuration")]),s._v(" "),a("p",[s._v("Create a new user in the OS and set a password using "),a("code",[s._v("adduser")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# adduser dbusername\n")])])]),a("p",[s._v("Create a database, user and set userpassword")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - postgres\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ createuser --interactive dbusername\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ createdb blockscout\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ psql\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# ALTER "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" dbusername WITH PASSWORD "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dbuserpassword'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# GRANT ALL PRIVILEGES ON blockscout TO dbusername"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("q\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),a("p",[s._v("PSQL user should be first created as a general user with "),a("code",[s._v("adduser")]),s._v(". The user's system password should not be the same as their database "),a("code",[s._v("dbuserpassword")]),s._v(". "),a("code",[s._v("dbuserpassword")]),s._v(" will be parsed by BlockScout as part of the DB link, thus it's recommended to omit problematic characters in the database password")])]),s._v(" "),a("p",[s._v("Set your storage path as psql datadir")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/postgresql/10/main/postgresql.conf\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\ndata_directory "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/mnt/psql/storage/path'")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# use data in another directory")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),a("p",[s._v("Make sure the PSQL user has the right permissions on storage dir.")]),s._v(" "),a("p",[s._v("Start psql")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start postgresql\n")])])]),a("p",[s._v("Validate data directory path")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - postgres\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ psql\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# SHOW data_directory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    data_directory\n---------------------\n /mnt/psql/storage/path\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("q\n")])])]),a("p",[s._v("Make sure your user has blockscout db access")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("# "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - dbusername\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ psql -d blockscout\n")])])]),a("p",[s._v("Optionally, you might open the PostgreSQL port on your firewall: "),a("code",[s._v("5432/tcp")]),s._v(" to access it from a remote computer, but we don't recommend it.")]),s._v(" "),a("p",[s._v("Enable postgresql as service")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" postgresql\n")])])]),a("h2",{attrs:{id:"blockscout-dependencies-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#blockscout-dependencies-setup"}},[s._v("#")]),s._v(" BlockScout dependencies setup")]),s._v(" "),a("p",[s._v("Get base dependencies from apt: (yum/dnf on CentOS)")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                       automake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                       libtool inotify-tools "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                       libgmp-dev "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                       libgmp10 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                       build-essential "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                       cmake -y\n")])])]),a("h3",{attrs:{id:"erlang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#erlang"}},[s._v("#")]),s._v(" Erlang")]),s._v(" "),a("p",[s._v("Get official release "),a("a",{attrs:{href:"https://www.erlang-solutions.com/resources/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("here"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("Example on Ubuntu:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://packages.erlang-solutions.com/erlang/debian/pool/esl-erlang_version~ubuntu~bionic_amd64.deb\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ./esl-erlang_version~ubuntu~bionic_amd64.deb\n")])])]),a("p",[s._v("Check version and installation:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ erl --version\n")])])]),a("h3",{attrs:{id:"elixir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elixir"}},[s._v("#")]),s._v(" Elixir")]),s._v(" "),a("p",[s._v("Download pre-compiled release from "),a("a",{attrs:{href:"https://github.com/elixir-lang/elixir/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("github"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/elixir-lang/elixir/releases/download/tag/Precompiled.zip\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" -o Precompiled.zip -d elixir\n")])])]),a("p",[s._v("Add elixir bin to path (for permanent effect, append it to your user bash profile)")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(':/path/to/elixir/bin"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" ~/.profile\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(':/path/to/elixir/bin"')]),s._v("\n")])])]),a("p",[s._v("Check version and installation:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ elixir --version\n")])])]),a("h3",{attrs:{id:"node-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-js"}},[s._v("#")]),s._v(" Node.js")]),s._v(" "),a("p",[s._v("You can get Node.js "),a("a",{attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("here"),a("OutboundLink")],1),s._v(" or in your distro repos:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://deb.nodesource.com/setup_version "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -E "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nodejs\n")])])]),a("p",[s._v("Check Node version:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ nodejs --version\n")])])]),a("h2",{attrs:{id:"blockscout-installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#blockscout-installation"}},[s._v("#")]),s._v(" BlockScout installation")]),s._v(" "),a("p",[s._v("Get latest master from git:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/poanetwork/blockscout\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" blockscout\n")])])]),a("p",[s._v("Generate DB secret and export it to bash:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ mix phx.gen.secret    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# in blockscout base dir")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SECRET_KEY_BASE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("generatedAboveSecret/PasteHere"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("Set required env variables, example below is suited for Ethereum Mainnet and Parity(Openethereum)")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ETHEREUM_JSONRPC_HTTP_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://localhost:8545\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("COIN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ETH\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SUBNETWORK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Mainnet\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETWORK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ethereum\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DATABASE_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgresql://dbusername:dbpassword@localhost:5432/blockscout\n")])])]),a("p",[s._v("Install mix deps, create db, run migrations:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ mix "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" deps.get, local.rebar --force, deps.compile, compile  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# in blockscout base dir")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ mix "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" ecto.create, ecto.migrate\n")])])]),a("p",[s._v("Install Node.js deps, build static assets:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" apps/block_scout_web/assets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" node_modules/webpack/bin/webpack.js --mode production"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" apps/explorer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ mix phx.digest\n")])])]),a("p",[s._v("Enable SSL:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" apps/block_scout_web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" mix phx.gen.cert blockscout blockscout.local"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n")])])]),a("p",[s._v("The above command will generate and enable self-signed ssl certs, you need to replace them with real ones.\nYou may use "),a("a",{attrs:{href:"https://certbot.eff.org/instructions",target:"_blank",rel:"noopener noreferrer"}},[s._v("certbot"),a("OutboundLink")],1),s._v(" (letsencrypt) to do it, don't forget to set user permissions and configure the file: "),a("code",[s._v("/path/to/blockscout/config/dev.exs")]),s._v(", see example below:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /path/to/blockscout/config/dev.exs\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nconfig :block_scout_web, BlockScoutWeb.Endpoint,\n  http: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("port: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n  https: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    port: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4001")]),s._v(",\n    cipher_suite: :strong,\n    certfile: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"priv/cert/cert.pem"')]),s._v(",\n    keyfile: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"priv/cert/privkey.pem"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),a("p",[s._v("If using certbot, add cert renewal to crontab")]),s._v(" "),a("h3",{attrs:{id:"set-blockscout-as-systemd-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-blockscout-as-systemd-service"}},[s._v("#")]),s._v(" Set BlockScout as systemd service")]),s._v(" "),a("p",[s._v("Prepare BlockScout start script. You need to export all required env vars before each run:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /path/to/blockscout/start.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(':/home/scout/elixir/bin"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ETHEREUM_JSONRPC_HTTP_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://localhost:8545\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("COIN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ETH\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SUBNETWORK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Mainnet\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETWORK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Ethereum\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DATABASE_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("postgresql://dbusername:dbpassword@localhost:5432/blockscout\n/path/to/elixir/bin/mix phx.server\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /path/to/blockscout/start.sh\n")])])]),a("p",[s._v("Set your start script as service:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" /etc/systemd/system/blockscout.service\n\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Blockscout\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("User")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("youruser\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Group")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yourusergroup\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WorkingDirectory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/full/path/to/blockscout\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/bash /path/to/blockscout/start.sh\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KillSignal")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SIGHUP\n\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("default.target\n")])])]),a("p",[s._v("Open explorer ports on firewall "),a("code",[s._v("default 4000/tcp 4001/tcp")])]),s._v(" "),a("p",[s._v("Test run:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start blockscout\n")])])]),a("p",[s._v("Enable blockscout as a service:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" blockscout.service\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);